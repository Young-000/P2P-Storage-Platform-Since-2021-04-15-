%%%%%%%%%%%%%%%%%% Environment
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
%\documentclass{article}
%\usepackage{beamerarticle}

%%%%%%%%%%%%%%%%%% Basic Packages
\usepackage{amsbsy}
\usepackage{amstext}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{bbm}
\usepackage{color}
\usepackage{arydshln}
\usepackage{multirow}
\usepackage{changepage}
\usepackage{threeparttable,booktabs}
\usepackage{enumitem}
%\usepackage{natbib}
%\bibliographystyle{abbrvnat}
%\setcitestyle{authoryear,open={((},close={))}}

%%%%%%%%%%%%%%%%%% Style
\usepackage[margin=1in]{geometry}%
\usepackage[doublespacing]{setspace}

%%%%%%%%%%%%%%%%%% Fonts and Graphics
\usepackage[cjk]{kotex} %Korean TeX
\usepackage[pdftex]{graphicx}

%%%%%%%%%%%%%%%%%% Theorem
\newtheorem{Theorem}{Theorem}
\newtheorem{Lemma}{Lemma}
\newtheorem{assumption}{Assumption}
\newtheorem{prop}{Proposition}
\newtheorem{corollary}{Corollary}
\newcommand{\je}{\textcolor{blue}}
\newcommand{\yj}{\textcolor{magenta}}
\usepackage{apptools}
\AtAppendix{\counterwithin{Lemma}{section}}
\AtAppendix{\counterwithin{table}{section}}
\AtAppendix{\counterwithin{figure}{section}}

%%%%%%%%%%%%%%%%%% Bibliography and Appendices
%\usepackage[natbibapa]{apacite} % Including URLs in bibliography
\usepackage{natbib}
\usepackage[hyphens]{url} % Including URLs in bibliography
%\usepackage[toc,page,title]{appendix} % Extra control of appendices
\usepackage[titletoc,toc,title]{appendix}
\usepackage{chngcntr}

%%%%%%%%%%%%%%%%%Appendix title
\let\oldappendix\appendix
\makeatletter
\renewcommand{\appendix}{%
  \addtocontents{toc}{\let\protect\numberline\protect\appendixnumberline}%
  \renewcommand{\@seccntformat}[1]{Appendix~\csname the##1\endcsname\quad}%
  \oldappendix
}
\makeatother

%%%%%%%%%%%%%%%%%% Cover Page
\title{
	\onehalfspacing
	{\huge Sharing Economy in the Cloud:\\Pricing Schemes for Peer-to-Peer Storage Platforms}
}
\author{
	YoungJae Jang$^1$
	\and Jaeung Sim$^1$
	\and Kun Soo Park$^2$\thanks{Corresponding author. E-mail address: kunsoo@snu.ac.kr}
	\and Daegon Cho$^1$
}
\date{%
	\onehalfspacing
	$^1$KAIST College of Business, Seoul 02455, Republic of Korea\\%
	$^2$Seoul National University, Seoul 08825, Republic of Korea\\[2ex]%
	\today
}

%%%%%%%%%%%%%%%%%% Font Size of Abstract
\makeatletter
\renewenvironment{abstract}{%
	\if@twocolumn
	\section*{\abstractname}%
	\else %% <- here I've removed \small
	\begin{center}%
		{\bfseries \large\abstractname\vspace{\z@}}%  %% <- here I've added \Large
	\end{center}%
	\quotation
	\fi}
{\if@twocolumn\else\endquotation\fi}
\makeatother

%%%%%%%%%%%%%%%%%% Beginning of the Manuscript
\begin{document}
%
\begin{center}{\LARGE Sharing Economy in the Cloud:\\
Pricing Schemes for Peer-to-Peer Storage Platforms}\end{center}
%\maketitle
%
%
\begin{abstract}
	\onehalfspacing
	\noindent
	%The first page of the manuscript should include the title of the paper and an abstract of 100-250 words (POMS).
	{\normalsize
	%Previous version
	\yj{
	Encountering the unprecedented surge in data storage demands, peer-to-peer (P2P) storage platforms with blockchain technology have been emerging as a viable alternative to conventional cloud storage services. While crowdsourcing unused storage resources in P2P storage platforms might be securely conducted with blockchain, the decentralized structure with peer contributions does not necessarily ensure sufficient storage availability. There are several incentive schemes that P2P storage platforms can employ to encourage users to participate in the platform for storage capacity and access; however, little research has provided a theoretical background for the effectiveness of pricing schemes in this emerging service. This paper examines the pricing schemes that P2P storage platforms can adopt: the two-part tariff, the subscription, and the hybrid pricing. Using a game-theoretic approach, we consider a profit-seeking platform and incorporate interplays among renters and providers under a given pricing scheme. We show that the two-part tariff maximizes short-run profits of the platform and providers, while the subscription-based pricing shows the highest renter surplus. For the total surplus of all stakeholders, we find that the optimal pricing scheme differs by the size of potential providers. When there are enough providers to meet the storage demand from renters, the overall welfare is higher with the subscription-based pricing that maximizes renters' welfare. However, we show that the hybrid pricing or the two-part tariff maximizes social welfare in a situation where potential providers of the service are relatively scarce. We further investigate the platform's key operational parameters, such as redundancy algorithms and commission rates. We find that our main insights continue to hold when the platform determines these operational parameters endogenously.}}
\end{abstract}
\baselineskip 15pt
\hspace{0.2cm} {\sc Keywords:} Cloud computing; peer-to-peer markets; pricing schemes; sharing economy
%
%
%\clearpage

\doublespacing
%
%
\section{Introduction}\label{sec:intro}
%Previous version
\yj{Despite the rapid growth of public cloud services such as Amazon Web Services (AWS), the supply of the storage capacity is expected to be insufficient to meet the unprecedented demands of data volume in the near future. According to the International Data Corporation (IDC), the global spare storage capacity ratio in a commercial market is expected to be reduced from 33 percent in 2018 to 15 percent in 2020 \citep{robb2015space, idc2018worldwide}. As a prompt remedy for this upcoming shortage problem, efficient use of available storage space scattered over billions of personal computers (PCs) can be a plausible solution. The total amount of the non-commercial hard drive space on PCs is estimated to be nearly 250 exabytes (or 250,000 petabytes) in the world, which is larger than the capacity of all public cloud services combined \citep{thompson2014cloud}.\footnote{In 2012, Facebook stored 100 petabytes (PB), Microsoft stored 300 PB, and Amazon held 900 PB of data in its S3 cloud service.} If under-utilized hard-drive spaces of individual users can be successfully shared with potential renters, this can be a worthwhile complementary and competing service against conventional public cloud services. However, data storage sharing between PCs as a direct form of peer-to-peer (P2P) transactions has not been widely implemented due to several notable reasons, such as information privacy and security concerns.}

\yj{To adequately deal with these non-negligible issues, new data storage and sharing platforms integrating various Industry 4.0 technologies such as cloud computing and blockchain have been emerging \citep{protocol2017filecoin, vorick2014sia, wilkinson2016storj}. The blockchain-enabled decentralized P2P storage platforms make under-utilized hard-drive spaces available for data storage services with advanced encryption technology. Specifically, the P2P file-sharing protocol allows renters to store large files in fragmented pieces distributed to many individual providers. In this way, no single provider has enough fragments to reconstruct the original file. Also, the original files can be reassembled only by a renter’s private key, which further ensures that storage providers cannot read the content. In addition, the platforms use novel blockchain technology, by which storage contracts between renters and providers are recorded and verified collaboratively. Peers are incentivized or penalized based on their contributions to the network, leading to a stable resilience of the system.}

\yj{While P2P storage services are still at a beginning stage, they have already attracted significant attention in the cryptocurrency market with massive successes from the initial coin offerings (ICOs). For instance, Storj, a platform that appeared in 2014, has already reached a market capitalization of \$391.0 million with a total storage capacity of 36.7 PB, 71,689 platform users, and 285 million files. Similarly, Sia has reached a market capitalization of \$872.9 million. It has a total 3.5PB storage capacity and 1.2 million accumulated downloads. Filecoin, which appeared relatively recently, set a new record in ICO funding of \$257 million in 2017 and currently ranks 24th among all cryptocurrencies with a market capitalization of \$6.816 billion. Surprisingly, it reached a total 629.3PB storage capacity within ten months from its service launch. These cases demonstrate the expectation that P2P file-sharing services will rapidly grow by successfully mitigating security issues with a blockchain-enabled decentralized approach.\footnote{Please refer to recent statistics of Storj, Sia and Filecoin from https://www.storj.io/, https://siastats.info/ and https://file.app/, respectively. All statistics in this paragraph were observed on August 12, 2021.} Also, at the same time, it raises a question to attract and secure a greater number of participants to transit to the next stage.}

\yj{In fact, the decentralization creates an undesirable problem regarding storage availability. P2P platforms are not in control of the storage capacity and online connection to the stored files, so it is not easy to maintain and control agreeable service levels on both of them. In this regard, the P2P storage platforms rely mainly on various economic incentives to attract and maintain providers to ensure a sufficient level of storage availability in terms of the storage capacity and the online connection to the storage \citep{babich2020distributed, beck2018governance}. The P2P platforms currently charge renters two parts of fees: a storage service fee for providers sharing the storage space with renters and a bandwidth service fee for maintaining providers' online connection to the shared storage for renters. Sia, for example, has used a two-part tariff that imposes a base storage fee for using the storage capacity and a bandwidth fee for each download request to stored data. Similarly, Storj had charged the same type of fees for both services. Recently, Storj has introduced a new pricing scheme that provides free usage volume up to a certain threshold.\footnote{Storj's latest pricing policy is available at https://www.storj.io/pricing.} Once renters' download requests exceed the threshold, it starts imposing the bandwidth service fee. Although these platforms need to carefully design their pricing schemes to gather potential providers and renters effectively, for this new and immature market, little is known about the impact of potential pricing schemes on providers, renters, and the platform. }

\yj{Thus motivated, this study aims to investigate the impact of pricing schemes on decentralized P2P storage services. We incorporate pricing schemes that either centralized public cloud services or P2P storage platforms have adopted in practice. Specifically, P2P storage platforms have widely adopted the two-part tariff, while conventional public cloud services have widely used the pay-per-use, the subscription-based pricing, and the hybrid pricing \citep{kansal2014pricing}. We compare the effectiveness of these pricing schemes and their impacts on services, e.g., whether a specific pricing scheme that burdens renters for the provider's operating costs indeed brings benefits to the platform and whether the subscription-based scheme is appropriate for the decentralized P2P storage services.}

\yj{Specifically, we consider three pricing schemes: First, we investigate the two-part tariff (a lump-sum fee for the storage capacity + pay-per-use fee for the download bandwidth). Second, we incorporate the subscription-based pricing, where renters gain unlimited free access to stored files after paying for the storage capacity. Finally, we consider the hybrid pricing, which provides a lump-sum fee for the storage and a limited allowance of free bandwidth service that charges a pay-per-use fee for excess downloads. Regarding these pricing schemes, we intend to analyze their consequences on P2P storage services by answering the following research questions:
\begin{itemize}
	\onehalfspacing
	\item How do the platform's optimal service fees change according to the pricing scheme?
	\item Which pricing scheme would the profit-seeking platform choose?
    \item Which pricing scheme would maximize the overall system surplus?
	\item How does the impact of the pricing scheme change by the supply of sharing resources from potential providers?
\end{itemize}
\doublespacing}

\yj{To answer these questions, we build a game-theoretic model of a profit-seeking P2P storage platform that intermediates storage providers and renters. In our model, the P2P storage platform sets the service fees within the given pricing scheme. Then, storage providers with heterogeneous operational costs decide whether to join this P2P storage platform and share their unused storage capacity with renters. Finally, storage renters with heterogeneous willingness to pay for the storage service determine whether to adopt the P2P storage platform. For completed transactions between renters and providers, the platform charges commission rates to make a profit. We assume that the operating cost incurred by a storage provider increases in a bandwidth usage level that varies across renters. In storing a renter's file, the platform uses a redundancy algorithm (a $k$-of-$m$ erasure coding scheme) that divides each file into $k$ fragments and assigns encrypted copies of these fragments to $m$ ($> k$) providers. Here, we define the redundancy rate as the stored volume divided by the original file volume, $m/k$. Thus, the platform can only satisfy storage demand up to the capacity that participating providers offer, divided by the redundancy rate. Based on this model setting, we analyze the platform's choice of service fees under each pricing scheme and compare the platform's profit and the system surplus across the pricing schemes.}

\yj{Our results show that when the first-best prices---which maximizes the platform's profit when the size of potential providers is sufficient---are applicable, the two-part tariff always maximizes the platform's profit and provider surplus, and the hybrid pricing follows. Notably, we see that the hybrid pricing yields same outcomes when it offers a small amount of free-download volume. Regarding the renter surplus, the subscription-based pricing is most effective because the gain of renters with a higher usage frequency exceeds the loss from renters leaving the service due to a high storage fee. Consequently, the subscription-based pricing outperforms other pricing schemes regarding the total surplus.}

\yj{Markedly, we find that the impacts of pricing schemes significantly differ when potential providers are relatively scarce. If the size of potential providers is insufficient to fulfill the storage demand, the platform's optimal fees are subject to the market-clearing prices---which makes supply and demand equivalent---instead of the first-best prices. In this situation, the subscription-based pricing does not necessarily generate the maximum total surplus. In other words, the two-part tariff and the hybrid pricing can dominate the subscription-based pricing concerning the platform's profit and the total surplus. }

\yj{We further validate our findings by examining how the platform's key operational parameters, such as redundancy algorithms and commission rates, affect the results. We find that our main insights continue to hold when the platform determines these operational parameters endogenously, although the thresholds that enable the first-best prices change accordingly.}


\section{Related Literature}\label{sec:literature}

%Reviewer 2's suggestion
P1. Pricing (and capacity management) in centralized public cloud\\
P2. P2P sharing of computing resources\\
P3. Literature on other forms of sharing economies\\
P4. Summarize the distinct model features and contribution to the existing literature.


%Previous version
\yj{Our paper is closely related to the nascent literature on cloud computing. Recently, there has been growing interest in studying pricing strategies and capacity management in various academic fields such as operations management, information systems, and marketing \citep{fazli2018effects, chen2019pricing, chen2021discount, li2018should, kansal2014pricing, arbabian2021capacity}. For instance, \citet{fazli2018effects} examined how autoscaling, which allows firms to scale their computational load to match customer demand automatically, affects market entry decisions, equilibrium prices, profitability, and consumer surplus. They showed that autoscaling might alleviate price competition because it reduces uncertainty about demand and excessive computational capacities. \citet{chen2019pricing} considered two pricing schemes in cloud platforms: the reservation-based scheme and the utilization-based scheme. The former ensures a certain number of instances during the contract term (similar to the subscription-based pricing), while the latter charges customers based on the realized demand (similar to the pay-per-use). Considering a duopoly model where cloud platforms adopting different schemes compete for customers with heterogeneous usage, they found that customers with lower demand volatility would prefer the reservation-based scheme, whereas those with higher volatility would prefer the utilization-based scheme. Most of these studies have focused on centralized cloud platforms. However, P2P services hinge upon independent providers, and pricing plays a crucial role in maintaining the supply level of providers. Hence, it is difficult to predict how pricing schemes widely used in the existing cloud will affect P2P storage platforms. To the best of our knowledge, this paper is the first in the literature that studies the pricing strategies for P2P cloud platforms.}

\yj{This paper is also related to the burgeoning literature on sharing economy and online platforms. Several studies in this stream of the literature examined the benefit of sharing idle resources through these platforms. For example, \citet{zervas2017rise} provided empirical evidence that Airbnb's entry lowered hotel prices which are beneficial for consumers. \citet{lee2018battle} demonstrated that Uber significantly reduces search costs for riders. While numerous studies echoed that emerging sharing platforms are good for consumers \citep{einav2016peer, greenwood2017show}, some analytic studies indicated that those platforms are not necessarily beneficial to consumers in the long term as they might increase product prices \citep{jiang2018collaborative, weber2016product}. \citet{tian2018effects} showed that a sharing platform tends to increase the retailer's share of the gross profit margin in the distribution channel.}

\yj{Recent studies have suggested theoretical frameworks for pricing strategies in sharing platforms \citep{bai2019coordinating, benjaafar2019peer, cachon2017role, bimpikis2019spatial, taylor2018demand}. \citet{benjaafar2019peer} considered both profit-maximizing and social-welfare-maximizing platforms and compared their equilibrium outcomes. They found that the differences in the social welfare between these platforms are relatively modest. \citet{cachon2017role} examined several pricing schemes, including the surge pricing, for sharing platforms with self-scheduling providers. They found that the surge pricing generally achieves nearly the optimal profit and improves the surplus of providers and consumers as labor becomes expensive. Our study also compares the impacts of pricing schemes on a sharing platform's profit and system surplus. However, unlike \citet{cachon2017role}, we consider providers with heterogeneous operating costs. Moreover, our model incorporates providers' operating costs that may change according to renters' usage levels.}

\yj{This study also extends the literature on sharing platforms for computing resources. The vast majority of studies in this stream focused on the mechanism design of P2P file-sharing networks \citep{antoniadis2004p2p, casadesus2010p2p, de2017quality, ghasemkhani2018contracting, golle2001incentives}. \citet{antoniadis2004p2p} conducted a numerical analysis to compare several incentive schemes and suggested that a simple fixed fee scheme, where all peers are required to share a standard number of files, can achieve a high level of network efficiency. \citet{de2017quality} studied how individual peers make sharing decisions under quality-of-service based pricing schemes. They showed that socially optimal behaviors are induced where a pricing scheme does not charge users for content requests, while profit maximization is achieved where a pricing scheme charges users for requesting content. \citet{ghasemkhani2018contracting} proposed a contracting scheme for a monopolistic P2P file-sharing network, in which the network compensates each contracted peer node for the supply of files. The authors investigated the optimal reward scheme for the profit-seeking P2P network regarding network structures, content availability, propagation delay, among others. }

\yj{Recently, emerging platforms have enabled sharing various computing resources, such as storage capacity, CPU power, and internet bandwidth \citep{dickson2019monetizing, sharma2020blockchain}. However, no study has contributed to our understanding of sharing platforms for these resources. P2P storage sharing comprises two parts: the initial storage service and the subsequent bandwidth service. Thus, a two-part tariff consisting of a lump-sum charge (storage fee) and a per-unit charge (bandwidth fee) is widely adopted in practice, requiring a different framework from that for file sharing platforms where consumers are satisfied once they receive appropriate files.}

%\subsection{Main Contributions}
\yj{Our study is the first attempt to provide a theoretical framework for decentralized P2P storage platforms that do not have direct control over service capacities. Since P2P storage platforms rely on independent providers with unused storage capacity, their pricing decisions affect both customers' costs and service levels. We develop a model that accounts for this complexity by incorporating providers' service participating decisions, renters' service adoption decisions, and the interactions between providers and renters. Furthermore, we investigate the potential of the pricing scheme that P2P storage platforms have not explicitly implemented yet---the subscription-based pricing, which has been widely adopted in conventional public cloud services \citep{kansal2014pricing}. We show that the impacts of pricing schemes on the system surplus can change by the relative number of potential providers compared to the storage demand from renters. When there are a sufficient number of potential providers, the subscription-based pricing, which has been neglected by P2P storage platforms in practice, always produces the highest renter surplus and the highest system surplus. Interestingly, the two-part tariff or the hybrid pricing can dominate the subscription-based pricing regarding the platform's profit and the total surplus when the number of potential suppliers is insufficient to the storage demand.}

\yj{This study also contributes to the literature on the pricing for resource sharing services. We show that pricing schemes that reward providers can improve the system surplus when the potential suppliers are too scarce compared to consumers. In this situation, the impact of pricing schemes varies according to the degree of scarcity of suppliers. For instance, peer-to-peer delivery platforms that serve various regions in terms of the number of sellers, deliverers, and consumers might offer different pricing schemes across regions according to the relative scarcity of sellers or deliverers compared to consumers to improve the surplus of overall stakeholders. The existing literature on the sharing economy such as \citet{cachon2017role} and \citet{benjaafar2019peer} did not consider the potential of the pricing schemes that we have examined in this paper. In fact, the two-part tariff that consists of lump-sum fees and pay-per-use can also be used in other sharing platforms (e.g., base rates and cost-per-user in ride-sharing platforms). Hence, our model can extend these studies by enhancing insights on sharing platforms' pricing strategies.}

\yj{Lastly, this study explores a new service on sharing computing resources that prior studies have not examined. We observe that some computing resources like CPU power have begun to be shared only a few years ago, which still has some technical obstacles \citep{dickson2019monetizing, sharma2020blockchain}. We expect that our framework can provide useful insights for sharing services of various computing resources where a higher usage level of a renter leads to a higher operating cost of a provider, which is not the common model setting in the sharing economy literature. }
%
%
%기존 Model 3인데 수정 여부는 추후 결정
\section{Model}\label{sec:model}
In this section, we first describe our model setups and players, which is followed by the key decisions of players. We present the summary of basic notations in Table \ref{tbl:summary}. The proofs of all lemmas and theorems appear in Appendix \ref{app:proof}.

\begin{table}[h] \centering
\textbf{\caption{A Summary of Basic Notations\label{tbl:summary}}}
\vspace{0.1in}
\begin{tabular}{l | p{9cm}}
\textbf{Notation} & \textbf{Description} \\ \hline
$n_r$ & Number of potential renters \\
$n_p$ & Number of potential providers \\
$u_i$ & Renter $i$'s unit utility of bandwidth usage \\
$\lambda_i$ & Renter $i$'s bandwidth usage \\
$\rho_j$ & Provider $j$'s sensitivity to bandwidth provision\\
$\theta$ & Redundancy rate \\
$\xi$ & Unit operating cost\\
$\alpha$ & Proportion of revenue that providers receive \\
$p_s$ & Storage fee\\
$p_b$ & Bandwidth fee
\end{tabular}
\end{table}



\subsection{Model Setups}\label{subsec:setup}
%Previous version
\yj{We consider a P2P storage platform where some peers provide their unused storage (hereafter, \textit{providers}) and other peers rent the storage space and request downloading of stored files (hereafter, \textit{renters}). The platform offers two services to renters: \textit{i)} the initial file storage (the storage service), and \textit{ii)} an access to the stored files via a download request (the bandwidth service). Once a renter requests storage space to save a file, a platform divides her file into $k$ fragments and assigns them to $m$ ($> k$) providers.\footnote{P2P storage platforms employ a $k$-of-$m$ erasure coding scheme, under which an original file is divided into $k$ shards, and the shards are re-coded into $m$ encrypted fragments ($m > k$) \citep{wilkinson2016storj}. Since any $k$ fragments among $m$ fragments are sufficient to reconstruct the file, erasure coding enables high reliability with low expansion factors \citep{weatherspoon2002erasure}. See Appendix \ref{app:algorithm} for technical details.} After completing the initial file storage, a renter can request a download of the stored file to the providers.}

\yj{Since the availability of stored files to storage renters is critical for P2P storage services, the P2P storage platforms ensure that the likelihood of file transfer failure is negligible by setting the appropriate algorithmic parameters and requirements to providers: 1) the redundancy in the erasure coding $\theta \equiv \frac{m}{k}$, which refers to the proportion of the size of the duplicated data compared to the size of the original data, and 2) uptime $t$, which represents the proportion of provider's time being connected to the P2P network \citep{protocol2017filecoin, vorick2014sia, wilkinson2016storj}. A higher $\theta$ decreases the failure probability, while it requires a larger storage capacity to meet given storage demand from renters. Similarly, a higher required uptime $t$ reduces the likelihood of the file transfer failure, while it imposes a higher operating cost on providers. Since the file-transfer failure severely damages renters' utility, P2P storage platforms attempt to maintain extremely low failure probabilities. As a consequence, it is extremely rare for well-performing P2P networks to experience file transfer failure in practice.\footnote{For instance, the failure probability of a $k$-of-$m$ erasure coding is 5.266e-10 where $k=6$, $m=18$, and $t=0.90$ \citep{wilkinson2016storj}. In Sia's storage network, providers must maintain a 95–98\% uptime, enabling the network to achieve 99.9999\% availability of stored files to renters. Appendix \ref{app:algorithm} provides more details on the algorithmic backgrounds.} Thus, we assume that the P2P storage platform sets an availability goal (i.e., 1 - the failure probability) that is sufficiently large and close to its upper bound, one, and maintains its $\theta$ and $t$ that satisfy this availability goal. As such, our model does not take the failure probability of the file transfer into account by assuming a properly set $\theta$ and $t$. Nevertheless, in our model, we incorporate heterogeneous operating costs of providers to meet this uptime requirement by the platform that is critical in providers' service participating decision.}

\begin{figure}[ht!]
\centering
\includegraphics[width=14cm]{old_figure/fig1_timeline.pdf} 
\textbf{\caption{The Sequence of Events\label{fig:timeline}}}
\end{figure}

\yj{Figure \ref{fig:timeline} illustrates the sequence of the events for the platform, providers, and renters in our model. Specifically, given the pricing scheme, redundancy algorithm ($\theta$, $t$), commission rate ($1 - \alpha$), and potential sizes of renters ($n_r$) and providers ($n_p$), the platform first determines a storage fee and a bandwidth fee. Second, potential providers for this P2P storage service decide whether or not to join the platform based on their expected profits. Once a provider joins the platform, he provides unused storage spaces to renters. Lastly, observing the service fees and the available storage capacity, potential renters of the P2P storage service evaluate the expected utility and decide whether to adopt the service. Once adopting the P2P storage service, a renter starts using the storage spaces from providers. }

\yj{We now further explain three essential players in the P2P file-sharing service: renters, providers, and a service platform. }

\yj{\textbf{\textit{Renters.}} We consider a renter that needs a storage space for her unit volume of files. We denote the total number of potential renters in the market by $n_r$. Each potential renter decides whether to adopt the P2P storage platform and rent the storage space from providers. If a renter adopts the platform, she will obtain the usage value and pay the storage service fees for storing files to the providers' spaces and the bandwidth service fees for requesting a download of stored files. The renters will join the platform if their usage value exceeds the total service costs. }

\yj{This model concerns renters with a continuum of bandwidth usage level (or frequency of download requests) of stored files denoted by $\lambda$. 
It is popularly observed in the literature that the usage of cloud-resource is distributed with relatively heavy tails compared with exponential, log-normal, and normal distributions \citep{loboz2012cloud}. Thus, we assume that a renter's bandwidth usage $\lambda$ follows the Pareto distribution in keeping with the extant literature \citep{li2018should}. 
In this case, the probability distribution function of the bandwidth usage level is $f(\lambda) = \frac{b \lambda_0^b}{\lambda^{b+1}}$, where the minimum bandwidth usage level is denoted by $\lambda_0$. For analytical tractability, we simplify our assumption such that the distribution of bandwidth usage level is characterized by the parameter value of $b = 2$.}

\yj{Renters may obtain different values from using the service. Specifically, they may feel different value from storing its unit volume to providers' spaces and downloading stored files from them. However, since we assume a renter with a unit volume, such a different valuation structure can be mostly captured by the renter's heterogeneous valuation to her bandwidth usage level; as the value of storing file increases, it can be expressed with an increase in the value of each access to stored files. We thus incorporate heterogeneous valuation of a renter's service usage such that renter $i$'s utility from the bandwidth service follows a uniform distribution, $u_i \sim U[0, 1]$. As a result, renter $i$'s total utility obtained from storing files is $u_i \lambda_i$. To focus on the interplay among the platform, providers, and renters, we assume that $\lambda_i$ and $u_i$ are independent.}

\yj{Renters pay the total service cost $c_i(p_s, p_b, \lambda_i)$ for their storage and bandwidth services according to the service fees ($p_s, p_b$) set by the P2P storage platform. This cost may change by $\lambda$ depending on a pricing scheme.  
As the utility per the bandwidth volume $u_i$ is assumed to be bounded above and below by $0$ and $1$, the bandwidth service fee $p_b > 1$ does not make sense to any renters. Thus, we restrict our attention to the case where the platform's bandwidth fee varies between $0$ and $1$, i.e., $p_b \le 1( = \bar{u})$.}

\yj{\textbf{\textit{Providers.}} We consider providers that can share his unit volume of unused storage space. A provider will participate in the P2P storage platform if his expected revenue exceeds his operating costs. We denote the total number of potential providers in the market by $n_p$. }

\yj{If a provider joins the P2P storage platform, he earns revenue based on the storage and bandwidth services he offers. 
The provider's revenue comes from the renters' payments for the service, subtracted by the platform's commission rates. We denote the proportion a provider receives from service fees imposed on renters by $\alpha \in [0, 1]$. Given that the storage fee applies to the provider's unit volume of space, the revenue for a provider's storage service is proportional to $\alpha p_s$ across all pricing schemes. In contrast, the revenue from a provider's bandwidth service may vary from $\alpha p_b$ depending on the pricing scheme. For example, if the platform provides a free allowance of bandwidth service, the bandwidth revenue is zero. }

\yj{We incorporate heterogeneous operating costs of providers for sharing each provider's unit volume of unused space. The operating cost may comprise multiple sources, including the opportunity cost of using computing resources, obsolescence of the computing device, and Internet and electricity costs. This suggests that the operating costs increase with the received download requests as well as the providers' own uptime. We thus express the operating costs of providers as $\rho_j \hat{\omega}_b \xi(t)$, where $\rho_j$ represents provider $j$'s sensitivity to the bandwidth provision which follows a uniform distribution, $\rho_j \sim U[0, 1]$, and $\hat{\omega}_b$ refers to the expected bandwidth volume for each provider.\footnote{We denote the total bandwidth volume of all participating providers by $\omega_b$.} Also, $\xi(t)$ is the unit operating cost for a provider and increasing in uptime $t$. Hereafter, for notational convenience, we omit $t$ in $\xi(t)$ denote this simply by $\xi$.}

\yj{\textbf{\textit{Platform.}} We consider a profit-seeking platform that gathers renters and providers in the common marketplace and enables encrypted contracts for storage sharing services between them. The P2P storage platform announces the redundancy rate $\theta$ and the required uptime $t$, which determine the P2P contract environment. The platform makes a profit by charging commission rates on completed transactions. For instance, Sia operates $\theta=3$ and $t=0.98$, and it charges 3.9\% of commission rate on all successful storage contract payouts to P2P storage users. To focus on the characteristics of pricing schemes, we assume exogenously given redundancy algorithm ($\theta, t$) and commission rate ($1-\alpha$) in the first part of our analysis (Sections \ref{sec:analysis1} and \ref{sec:analysis2}). We will relax this assumption and consider endogenous selections of the algorithm and commission rate in Section \ref{sec:analysis3}.}

\yj{In the P2P storage services, the size of storage space offered by providers and the size of space requested (by renters) determine the overall service availability. In addition, the redundancy rate $\theta$ affects the service availability since a higher redundancy $\theta$ decreases the available space to renters the platform can provide. Thus, for given redundancy $\theta$, it is critical for the P2P service platform whether the capacity of potential providers in the market divided by the redundancy (i.e., $n_p/\theta$) exceeds the potential storage demand (i.e., $n_r$). In Section \ref{sec:analysis1}, we turn our attention to the case of a sufficient base of potential providers in the market, and in Section \ref{sec:analysis2}, we examine the case of an insufficient base of potential providers.}


\subsection{Peer Decisions}\label{subsec:problem}

We describe peer decisions under a given platform's decision. Specifically, we consider a renter's decision to adopt the P2P storage service and a provider's participation decision in the P2P network. Table \ref{tbl:volume} presents the summary of notations for storage and bandwidth volume variables.

\begin{table}[h] \centering
\textbf{\caption{A Summary of Volume Notations\label{tbl:volume}}}
\vspace{0.1in}
\begin{tabular}{l | p{12cm}}
\textbf{Notation} & \textbf{Description} \\ \hline
$\upsilon_s$& Total storage volume of renters willing to adopt the platform \\
$\upsilon_b$& Total bandwidth volume of renters willing to adopt the platform \\
$\omega_s$ & Total storage volume of providers willing to join the platform\\
$\omega_b$ & Total bandwidth volume of providers willing to join the platform  \\
$\hat{\omega}_s$& Expected storage volume for each provider\\
$\hat{\omega}_b$ & Expected bandwidth volume for each provider \\
\end{tabular}
\begin{tablenotes}
  \small
  \item Note. The following equations hold: $\upsilon_b = \upsilon_{bp} + \upsilon_{bf}$, $\omega_b = \omega_{bp} + \omega_{bf}$, $\hat{\omega}_b = \hat{\omega}_{bp} + \hat{\omega}_{bf}$, where the subscripts \textit{bp} and \textit{bf} indicate the paid bandwidth volume and the free (i.e., unpaid) bandwidth volume, respectively. 
\end{tablenotes}
\end{table}

\textbf{\textit{A Renter's Decision.}} (...)

\yj{\textbf{\textit{A Provider's Decision.}} Each provider determines whether to offer his unused storage to renters through the platform. Depending on the platform's decision and the market condition, the storage spaces from participating providers and the storage demand from renters vary. If the storage capacity offered exceeds the storage demand requested, we assume that the platform randomly assigns renters to providers, and providers equally share the total storage demand accordingly. Note that every provider holds a certain piece of a file due to the P2P storage platform's redundancy algorithm (see Appendix \ref{app:algorithm} for details). Thus, all providers can make positive revenues even if there are fewer renters than providers. Otherwise, if the potential capacity offered is insufficient to the storage demand from providers, we assume that the storage demand is randomly rationed. That is, some demand is not served while all providers fully utilize their capacities. In sum, the expected storage volume for each provider $\hat{\omega}_s$ is expressed as:
\begin{equation*}
    \hat{\omega}_s = \begin{cases}
    \frac{\theta \upsilon_s }{\omega_s} & \text{ if } \theta \upsilon_s \le \omega_s\\
    1 &\text{ if } \theta \upsilon_s \ge \omega_s,
    \end{cases}
\end{equation*}
where $\omega_s$ refers to the total storage space of providers willing to join the platform and $\upsilon_s$ denotes the total storage demand from renters who are willing to adopt the P2P storage service.}

\yj{Next, the bandwidth volume, which affects the bandwidth revenue and the operating cost, is determined. The bandwidth revenue comes from the amount of paid bandwidth volume $\hat{\omega}_{bp}$, which is proportional to $\hat{\omega}_s$ due to random rationing of renters. The bandwidth cost comes from the provider's operating cost, which depends on the total bandwidth volume $\hat{\omega}_b$ that includes both free and paid amounts. Note that $\hat{\omega}_b > \hat{\omega}_{bp}$ holds when the platform offers a certain amount of free access to stored files in the subscription-based pricing and the hybrid pricing. Based on the expected demand for the storage service and the bandwidth service, we derive provider $j$'s profit $\pi_j$ as follows:
\begin{equation*}
	\begin{aligned}
	    &\pi_j =\alpha (\hat{\omega}_s p_s + \hat{\omega}_{bp} p_b) - \rho_j \hat{\omega}_b \xi,\\
	    &\text{where }  \hat{\omega}_{bp} = \hat{\omega}_s \cdot \frac{\upsilon_{bp}}{\theta \upsilon_s} \text{ and }\hat{\omega}_b = \hat{\omega}_s \cdot \frac{\upsilon_b}{\theta \upsilon_s}.
    \end{aligned}
\end{equation*}
%%%%%%%%%%%%%
위의 식에 더 명확한 설명을 위하여 $\hat \omega_{bp} = \frac{\hat \omega_s}{\theta \upsilon_s} \cdot \upsilon_{bp}$ and $\hat \omega_b = \frac{\hat \omega_s}{\theta \upsilon_s} \cdot \upsilon_b$로 변경. $\frac{\upsilon_b}{\theta \upsilon_s}$라고 썼던, frequency라는 개념 자체의 전달력이 그리 높지 않았던 것으로 보임. 이를 전체 용량 중, 나한테 저장되는 용량에 대응되는 만큼 다운로드가 발생한다는 형태로 변경.
%%%%%%%%%%%%%
Although the storage volume and the bandwidth volume are utilized homogeneously across providers, their participation decisions can vary because their sensitivity to the bandwidth provision $\rho_j$ is heterogeneous. We define the threshold of the sensitivity to the bandwidth provision as $\rho_m$, where only the providers with their sensitivities lower than the threshold would participate in the P2P storage platform (i.e., provider $j$ joins the platform if and only if $\rho_j \le \rho_m$).}

\section{Optimal Decisions}

\textcolor{red}{(summary of platform's decision problem)}

We consider a P2P storage service platform whose objective is to maximize the expected profit with its service fees ($p_s, p_b$). Utilizing the behaviors of renters and providers, we can express the platform's optimization problem as:
\begin{equation*}
    \begin{aligned}
        &\max_{p_s, p_b}~ \Pi(p_s, p_b) = (1-\alpha) (V_s p_s + V_{bp} p_b),\\
        &\text{ where  } V_s = \min\{\theta \upsilon_s, \omega_s\} \text{ and } V_{bp} = V_s \cdot \frac{\upsilon_{bp}}{\theta \upsilon_s}.
    \end{aligned}
\end{equation*}
 
It is worth mentioning that the total volume of shared storage $V_s$ equals the minimum of $\theta \upsilon_s$ and $\omega_s$; that is, the shared storage volume is determined not only by the renters' demand but also by the participating providers' capacity. Using the results of Lemma \ref{lem:pvd_chr} in Appendix \ref{app:proof}, we can transform this platform's problem into the equivalent problem as follows:
\begin{equation*}
    \begin{aligned}
        &\max_{p_s, p_b}~ \Pi(p_s, p_b) = (1-\alpha) (\theta \upsilon_s p_s + \upsilon_{bp} p_b)\\
        &\text{  s.t.  } \upsilon_s \le \omega_s / \theta .
    \end{aligned}
\end{equation*}
This implies that the maximum profit is achieved when the platform can afford all renters willing to adopt it. Therefore, the platform should set the service fees that can maintain the capacity of the participating providers $\omega_s$ divided by the redundancy $\theta$ higher than or equal to the storage demand from renters $\upsilon_s$.

%In the following Section, we consider a pricing scheme that maximizes the renters' total payment when sufficient number of potential providers exist in the market to satisfy the renters' capacity requests (hereafter, \textit{the first-best pricing}). Under the first-best prices, we compare the optimal service fees, the platform's profit, and the system surplus across pricing schemes. After that, we consider the situation where renters are rationed by the supply level (i.e., \textit{the market-clearing pricing}) due to insufficient number of potential providers in the market. We examine how this supply-side restriction affects the outcomes of pricing schemes.
%
%
\yj{In this section, we consider a pricing decision that maximizes the renters' total payment when the market has a sufficient number of potential providers to fully satisfy the renters' storage demand (hereafter, \textit{the first-best prices}). In other words, the first-best prices maximize the platform's profit when only renters' willingness to pay matters. Figure \ref{fig:taxonomy} illustrates the taxonomy of pricing schemes and pricing decisions. Under the first-best prices, we compare the optimal service fees, the platform's profit, and the system surplus for the three pricing schemes we study in this paper.}
\begin{figure}[ht!]
\centering
\includegraphics[width=16cm]{old_figure/fig2_pricing_taxonomy.pdf} 
\textbf{\caption{Taxonomy of Pricing Schemes and Pricing Decisions\label{fig:taxonomy}}}
\end{figure}

\subsection{Optimal Service Fees: First-Best Prices}
We define the first-best prices of service fees ($p_s, p_b$) as the service fees that maximize the platform's profit when the number of potential providers is sufficient to meet the storage demand from renters. In other words, this implies that the platform finds such service fees optimal for its profit when it does not have to be concerned about the availability of the storage capacity from potential providers in the market. We analyze and compare the optimal service fees for each of the three pricing schemes we consider in this paper. Henceforth, we denote the two-part tariff, the subscription-based pricing, and the hybrid pricing by superscripts $T$, $S$, and $H$, respectively.

\textbf{\textit{Two-part Tariff.}} In this pricing scheme, the platform charges renters the lump-sum storage fee $p_s$ for using the storage space and the pay-per-use bandwidth fee $p_b$ for each download request (the unit bandwidth volume) to the stored files. In the two-part tariff, the total service cost of renter $i$ for the P2P storage service is expressed as $c_i(p_s, p_b, \lambda_i) = \theta p_s + \lambda_i p_b $. In this cost, $\theta p_s$ represents the storage service cost with the redundancy rate $\theta$, whereas $\lambda_i p_b$ refers to the bandwidth service cost with the bandwidth usage level $\lambda_i$. The utility of renter $i$ is then represented as the value of using the storage service subtracted by the total service cost, i.e., $U_i = \lambda_i u_i - \theta p_s - \lambda_i p_b$. Renter $i$ in the two-part tariff would adopt the P2P storage platform if her value of the storage service exceeds the service costs (i.e., $U_i \ge 0$). We define $u^T(\lambda) \equiv \frac{\theta p_s}{\lambda} + p_b$, which indicates the lower bound of $u_i$ for renters who adopt the service with given bandwidth usage level $\lambda$ in the two-part tariff. Then, renter $i$ would adopt the platform if and only if $u_i \ge u^T(\lambda)$. Considering the distribution function of renters' bandwidth usage levels $\lambda$, we obtain the total expected storage demand and bandwidth demand from renters in the two-part tariff, denoted by $\upsilon_s^T$ and $\upsilon_b^T$, as: %the free download volume of bandwidth service $\upsilon_{bf}$, and the paid download volume $\upsilon_{bp}$ under a two-part tariff as:

\begin{equation*}
\begin{aligned}
&\upsilon_s^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} f(\lambda) d \lambda,\\
&\upsilon_{b}^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} \lambda f(\lambda) d \lambda \; (=\upsilon_{bp}^T),\\
&\text{where } \lambda^T = \frac{\theta p_s}{1-p_b}.
%&\upsilon_{bf}^T = 0\\
\end{aligned}
\end{equation*}
We also note that the free download volume of the bandwidth service $\upsilon_{bf}^T$ is zero because the platform does not offer the free bandwidth allowance in the two-part tariff. % renters pay the bandwidth fee for all usage of bandwidth service.
%Then, the expected download volume by renters that is subject to the bandwidth service fee in the two-part tariff, denoted by $\upsilon_{bp}^T$, equals $\upsilon_s^T$. %is expressed as:
%\begin{equation*}
%\begin{aligned}
%&\upsilon_s^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} f(\lambda) d \lambda. %\\
%&\upsilon_{bp}^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} \lambda f(\lambda) d \lambda.
%&\upsilon_{bf}^T = 0\\
%\end{aligned}
%\end{equation*}

\textbf{\textit{Subscription-based Pricing.}} When the platform adopts the subscription-based pricing, it charges only a lump-sum fee for the storage service and offers the bandwidth service for free. Therefore, regardless of service usage level $\lambda$, renter $i$'s total service cost only consists of the storage fee multiplied by the redundancy rate (i.e., $c_i(p_s, p_b, \lambda_i) = \theta p_s$). Then, renter $i$'s utility is expressed as $U_i = \lambda_i u_i - \theta p_s$. Similarly to $u^T(\lambda)$, we define $u^S(\lambda) = \frac{\theta p_s }{\lambda}$ as the lowest $u_i$ of renters that adopt the P2P storage service for a given bandwidth usage level $\lambda$ in the subscription-based pricing. The expected total storage demand and bandwidth demand from renters with respect to renters' $\lambda$, which is denoted by $\upsilon_s^S$ and $\upsilon_b^S$ is expressed as: %, the free download volume of bandwidth service $\upsilon_{bf}$, and the paid download volume $\upsilon_{bp}$ under subscription-based pricing can be expressed as:
\begin{equation*}
\begin{aligned}
&\upsilon_s^S = \int_{\max\{\lambda_0, \lambda^S\}}^{\infty} \{1-u^S(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{b}^S = \int_{\max\{\lambda_0, \lambda^S\}}^{\infty} \{1-u^S(\lambda)\} \lambda f(\lambda) d \lambda \; (=\upsilon_{bf}^S),\\
%&\upsilon_{bp}^S = 0\\
&\text{where } \lambda^S = \theta p_s.
\end{aligned}
\end{equation*}
Since the platform does not charge renters the bandwidth fee for the download volume of the stored files, providers are not compensated for offering the bandwidth service. Accordingly, we have $\upsilon_{bp}^S = 0$. %Also, as the storage service fee is the only revenue source in the subscription-based pricing, the expected bandwidth volume that renters use for free equals $\upsilon_s^S$.

\textbf{\textit{Hybrid Pricing.}} In the hybrid pricing, the platform charges the storage fee $p_s$ and offers a free bandwidth allowance up to $q \lambda_0$, where $\lambda_0$ represents the minimum bandwidth usage level among all potential renters, and $q\, (\ge 0)$ refers to a coefficient of the free bandwidth allowance. Note that $q = 0$ makes the hybrid pricing equivalent to the two-part tariff. The platform charges the bandwidth fee $p_b$ for the bandwidth usage that exceeds $q \lambda_0$. Therefore, renter $i$'s service cost is calculated as $c_i(p_s, p_b, \lambda_i) = \theta p_s + \max\{\lambda_i - q \lambda_0, 0\} p_b$, and her utility is $U_i = \lambda_i u_i - \theta p_s - \max\{\lambda_i - q \lambda_0, 0\} p_b$. For the hybrid pricing, we define $u^H(\lambda) \equiv \frac{\theta p_s + p_b(\lambda - q \lambda_0)}{\lambda}$ as the lowest $u_i$ among renters who have a bandwidth usage level $\lambda$ and adopt the P2P storage service.

The characteristics of hybrid pricing substantially differ depending on the amount of the free bandwidth service $q \lambda_0$. Hereafter, we denote the hybrid pricing with $0 \le q \le 1$ and $q \ge 1$ by superscripts $Hl$ and $Hh$, respectively. When $0 \le q \le 1$, all renters that adopt the service have bandwidth usage levels higher than $q \lambda_0$. Thus, each renter will pay the bandwidth fee for the bandwidth usage exceeding the free bandwidth allowance, where the total bandwidth usage that is subject to bandwidth service cost is $\lambda_i - q \lambda_0$. As a result, $\upsilon_s^{Hl}$, $\upsilon_{bf}^{Hl}$, and $\upsilon_{bp}^{Hl}$ in the hybrid pricing with low $q$ (i.e., $q\in [0,1]$) are expressed as:
\begin{equation*}
\begin{aligned}
&\upsilon_s^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{bf}^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} q \lambda_0  f(\lambda) d \lambda,\\
&\upsilon_{bp}^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty}  \{1-u^H(\lambda)\} (\lambda - q \lambda_0) f(\lambda) d \lambda,\\
&\text{where } \lambda^H = \frac{\theta p_s - q \lambda_0 p_b}{1 - p_b}.
\end{aligned}
\end{equation*}

In contrast, when $q \ge 1$, some renters that adopt the service may use the bandwidth usage level lower than $q\lambda_0$. These renters will only pay the storage service fee, just as in the case of subscription-based pricing. Other renters pay the bandwidth service cost for the bandwidth usage level that exceeds the free bandwidth allowance, i.e.,  $\lambda_i - q \lambda_0$. Accordingly, $\upsilon_s^{Hh}$, $\upsilon_{bf}^{Hh}$, and $\upsilon_{bp}^{Hh}$ in the hybrid pricing with high $q$ (i.e., $q\ge 1$) are calculated as below:
\begin{equation*}
\begin{aligned}
&\upsilon_s^{Hh} = \int_{\min\{q \lambda_0, \max\{\lambda_0, \lambda^S\}\}}^{q \lambda_0} \{1-u^S(\lambda)\} f(\lambda) d \lambda + \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{bf}^{Hh} = \int_{\min\{q \lambda_0, \max\{\lambda_0, \lambda^S\}\}}^{q \lambda_0} \{1-u^S(\lambda)\} \lambda f(\lambda) d \lambda + \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} q \lambda_0 f(\lambda) d \lambda,\\
&\upsilon_{bp}^{Hh} =  \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty}  \{1-u^H(\lambda)\} (\lambda - q \lambda_0)f(\lambda) d \lambda.
\end{aligned}
\end{equation*}
 
Using the results of the bandwidth usage volume that is subject to the service fee, we obtain the optimal service fees for each pricing scheme in the first-best prices as shown in Lemma \ref{lem:pricing}.



\begin{Lemma}\label{lem:pricing}
For each pricing scheme, the first-best prices of the P2P storage platform results in the optimal service fees as below:

\begin{equation*}
    \left(p_s^o, p_b^o\right) = \begin{cases}
    \left(0, \frac{1}{2}\right) &\text{for the two-part tariff}\\
    \left(\frac{q \lambda_0}{2\theta}, \frac{1}{2} \right) &\text{for the hybrid pricing with } q \in [0,1]\\
    \left(\frac{3q(2q^2 - 1)}{2(4q^3-1)} \frac{\lambda_0}{\theta}, \frac{3q^2(2q-1)}{2(4q^3-1)}\right) &\text{for the hybrid pricing with } q\ge 1\\
    \left(\frac{3 \lambda_0}{4\theta}, -\right) &\text{for the subscription-based pricing}
    \end{cases}
\end{equation*}
and the optimal $p_s^o$ ($p_b^o$) is strictly (weakly) increasing in $q$.
\end{Lemma}


Figure \ref{fig:price} illustrates how the optimal service fees of the platform in the first-best prices ($p_s^o, p_b^o$) change as the coefficient of the free bandwidth service $q$ increases, as observed in Lemma \ref{lem:pricing}. 

\begin{figure}[ht!]
\centering
\includegraphics[scale=1.4]{old_figure/fig3_price_v2.pdf}
%\includegraphics[width=11cm]{fig3_price_v1.pdf} 
\textbf{\caption{Pricing Schemes and First-best Prices\label{fig:price}}}
\end{figure}

From the above lemma, we derive how the optimal service fees of the profit-maximizing platform change according to each pricing scheme, which can be understood as the price structure with different amounts of the free bandwidth allowance. Specifically, in the two-part tariff, the platform achieves the highest profit when it does not impose the storage fee (i.e., $p_s=0$) and charges the smallest bandwidth fee without any free amount of the bandwidth service. Since all bandwidth usage is subject to the bandwidth service fee in the two-part tariff, the platform is better off allowing renters to join the platform for free.

Second, when the amount of free bandwidth service increases (i.e., $q$ increases) for $0 \le q \le 1$, the platform's optimal service fees is achieved by increasing the storage service fee while keeping the same bandwidth service fee. This occurs when the platform offers the free-download volume below the lowest bandwidth usage level of all renters $\lambda_0$. That is, all potential renters have a higher $\lambda$ than the free bandwidth allowance and are subject to the bandwidth service fee. In this vein, the platform can exactly make up for the revenue loss by offering free downloads and increasing a lump-sum fee. As a result, all renters pay the same total service cost in this pricing scheme, as is the case of the two-part tariff.

Lastly, the platform is better off increasing $p_b$ as well as $p_s$ when the amount of free download exceeds the minimum usage $\lambda_0$, i.e., $q \in (1, \infty)$. Specifically, $q > 1$ implies that some renters enjoy the complete bandwidth service for free if their bandwidth usage levels are lower than $q \lambda_0$. %the platform offers the free-download volume more than the minimum bandwidth usage for some renters. Since these renters do not pay for and obtain higher utility from the bandwidth service, 
Then, the platform tends to fill this cost-utility gap by increasing the storage service fee to renters. Note that the hybrid pricing becomes equivalent to the subscription-based pricing when $q \rightarrow \infty$ because all renters can use the bandwidth for free. As a result, the platform's optimal storage fees for the hybrid pricing and the subscription-based pricing are the same. %T, while the bandwidth fee converges to not applicable due to not charging renters for the bandwidth service under the subscription-based pricing.

\subsection{Optimal Service Fees: Market-Clearing Prices}
In this section, we consider the situation where renters are rationed by the supply level due to the insufficient number of potential providers in the market compared to the storage demand from renters (i.e., \textit{the market-clearing prices}). We investigate how this supply-side restriction affects the platform's profit and system surplus for the three pricing schemes that we study in this paper.

To do so, we first investigate the required number of providers for the first-best prices. Lemma \ref{lem:threshold} summarizes this result. 

\begin{Lemma}\label{lem:threshold} The platform's optimal service fees belong to the market-clearing prices when the number of potential providers $n_p$ is lower than the threshold $\psi$, which is calculated as:
%
\begin{equation*}
\begin{aligned}
    &\psi = \begin{cases}
    \frac{\xi \theta }{\alpha} n_r  &\text{ for the two-part tariff and the hybrid pricing with } q\le 1,\\
    \frac{5q^3 -3 q^2 + 3q - 2}{3q^3 + 3q^2 - 3q} \frac{\xi \theta }{\alpha} n_r   &\text{ for the hybrid pricing with } q \ge 1,\\
    \frac{5}{3}\frac{\xi \theta }{\alpha} n_r &\text{ for the subscription-based pricing,}
    \end{cases}
    \end{aligned}
\end{equation*}
%Also, when $n_p < \underline{n}_p$, the optimal service fees of the platform decrease in $n_p$ and satisfy the market-clearing condition.
and the optimal service fees of the platform decrease in $n_p$ when $n_p \le \psi$. 
\end{Lemma}

\begin{figure}[ht!]
\centering
\includegraphics[scale=1.4]{old_figure/fig4_psi_v2.pdf} 
\textbf{\caption{Free Bandwidth Allowance and First-best Price Thresholds\label{fig:first_best}}}
\end{figure}

For simplicity, we denote the thresholds of the two-part tariff and the subscription-based pricing by $\psi^T$ and $\psi^S$, respectively. Figure \ref{fig:first_best} illustrates how the first-best price threshold $n_p$ changes with respect to the coefficient of free bandwidth allowance $q$ in the hybrid pricing as shown in Lemma \ref{lem:threshold}. Specifically, when there are ample potential providers in the market compared to the threshold, the platform can achieve the highest profit using the first-best prices. Otherwise, such prices do not sufficiently incentivize providers to satisfy the storage demand from renters. As presented in Figure \ref{fig:first_best}, the threshold increases in $q$, suggesting that a high free bandwidth allowance discourages providers from participating in the platform due to a high operating cost involved with it. We also find that the threshold increases in $\xi \theta$, and it  decreases in $\alpha$. Note that $\xi \theta$ is proportional to the total operating cost of providers, while $\alpha$ indicates the providers' revenue share. Therefore, these results indicate that the first-best prices become less feasible as providers' profitability decreases.

\yj{Lemma 추가?}

\subsection{Optimal Redundancy Algorithm}

Redundancy 설명

\begin{Theorem}\label{thm:redundancy}
The optimal $(\theta, t)$ is obtained by minimizing $\xi \theta$ in all pricing schemes.
\end{Theorem}
Description: provider의 cost를 minimize하는 redundancy algorithm 선택.

\paragraph{Proof of Theorem \ref{thm:redundancy}}
\begin{proof}
% We prove this theorem by providing that the main intuitions in Theorems \ref{thm:surplus_first} and \ref{thm:surplus_market} remain unchanged when the platform sets the redundancy algorithm endogenously. Specifically, we show that the profit-maximizing redundancy algorithm $(\theta, t)$ is the one that minimizes $\xi \theta$ for all three pricing schemes. Given the common algorithm, the differences across the pricing schemes can be understood identically as Theorems \ref{thm:surplus_first} and \ref{thm:surplus_market} suggest. In doing so, we separately examine the first-best prices and the market-clearing prices as shown below:

To prove the Theorem \ref{thm:redundancy}, we separately examine the first-best prices and the market-clearing prices as shown below:\\

\noindent \textbf{\textit{Case 1: The First-best Prices.}}\\
If the optimal service fee satisfies the constraint $\tilde{\pi} \ge g_2$, the optimal service fee belongs to the first-best prices. As long as this constraint is satisfied, the platform's optimal profit is independent of $\theta$ and $\xi$ as articulated in part B of Theorem \ref{thm:surplus_first}'s proof.  
Also, the first-best prices is always preferred to the market-clearing prices whenever it is feasible, so the platform is incentivized to reduce the threshold $\psi$ for the first-best prices. Considering that $\psi$ is increasing in $\xi \theta$ for all pricing schemes (Lemma \ref{lem:threshold}), which is proportional to providers' operating costs, the platform will always minimize $\xi \theta$ to lower the threshold as much as possible.\\

\noindent \textbf{\textit{Case 2: The Market-clearing Prices.}}\\
Regarding the market-clearing prices, we prove the optimality of the redundancy algorithm that minimizes $\xi \theta$ by showing that lowering $\xi \theta$ weakly increases the platform's profit and satisfies the constraint for the market-clearing prices. Suppose that $(p_s^a, p_b^a)$ is the optimal market-clearing prices for $(\xi, \theta) = (\xi^a, \theta^a)$ and $\Pi^a$ is the platform's optimal profit. We will show that there exists a feasible pricing scheme $(p_s^b, p_b^b)$ for $(\xi, \theta) = (\xi^b, \theta^b)$ with $\xi^b \theta^b \le \xi^a \theta^a$, such that $\Pi(p_s^b, p_b^b; \xi^b, \theta^b) = \Pi^a$ and $\tilde{\pi} \ge g_2$. In other words, the optimal profit for $(\xi^b, \theta^b)$ is higher than or at least equal to than that for $(\xi^a, \theta^a)$ (i.e., $\Pi$ is weakly decreasing in $\xi \theta$).

If the platform sets the service fee that satisfies $\theta^b p_s^b=\theta^a p_s^a$ and the $p_b^b= p_b^a$, the renters' total payment remains unchanged. Also, the total storage/bandwidth volume (both paid and free) does not change. Then, the platform gains the same profit if the suggested price is feasible. We can prove the feasibility by showing that $(p_s^b, p_b^b)$ satisfies $\tilde{\pi}(p_s^b, p_b^b) \ge g_2(p_s^b, p_b^b)$, as suggested by Lemma \ref{lem:pvd_chr}. Putting $p_s^b = \frac{\theta^a p_s^a}{\theta^b}$ and $p_b^b = p_b^a$ into $\tilde{\pi}(p_s^b, p_b^b; \xi^b, \theta^b) - g_2(p_s^b, p_b^b; \xi^b, \theta^b)$, we show that the following inequality holds for the market-clearing prices $(p_s^a, p_b^a)$:
\begin{multline*}
\tilde{\pi}\left(\frac{\theta^a p_s^a}{\theta^b}, p_b^a; \xi^b, \theta^b\right) - g_2\left(\frac{\theta^a p_s^a}{\theta^b}, p_b^a; \xi^b, \theta^b\right) = \alpha \frac{\theta^a p_s^a}{\theta^b} + \alpha p_b^a \cdot \frac{\upsilon_{bp}}{\theta^b \upsilon_s} - \frac{\xi^b \upsilon_b}{n_p} \\
= \frac{\theta^a}{\theta^b} \left( \alpha p_s^a + \alpha p_b^a \cdot \frac{\upsilon_{bp}}{\theta^a \upsilon_s} - \frac{\theta^b \xi^b}{\theta^a}\frac{ \upsilon_b}{n_p}\right) 
>  \alpha p_s^a + \alpha p_b^a \cdot \frac{\upsilon_{bp}}{\theta^a \upsilon_s} - \frac{\xi^a \upsilon_b}{n_p} \\= \tilde{\pi}(p_s^a, p_b^a; \xi^a, \theta^a) - g_2(p_s^a, p_b^a; \xi^a, \theta^a) = 0. 
\end{multline*}

Combining these results, we conclude that the optimal redundancy algorithm is achieved by minimizing $\xi \theta$ and is the same across all of the three pricing schemes. Consequently, the pricing decision with an endogenous redundancy algorithm becomes equivalent to the pricing decision with an exogenously given algorithm, except that the algorithm minimizes the operating costs.
\end{proof}

\section{Pricing Schemes, Profit, and System Surplus}

\subsection{Profit and System Surplus}
%First-best
Since the P2P storage service uses a two-sided platform with renters and providers, it often matters whether this service improves each stakeholder's surplus. As such, two-sided platforms encounter public controversies regarding whether or not they fairly reward providers \citep{gartenberg2021google, scheiber2015growth}. Moreover, consumers and politicians are concerned about the possibility that customers are unfairly treated by large platforms \citep{kosoff2015newyorkcity}. Considering that such negative sentiments might incur substantive damages to the platform \citep{cachon2017role}, it is important to understand the potential tension between the platform's profit maximization and the other stakeholders' surplus. In this regard, we analyze the impact of pricing schemes on the overall system surplus as well as the platform's profit based on the results of Lemma \ref{lem:pricing}.

As described in Section \ref{subsec:problem}, under the given service fees ($p_s, p_b$) and the total storage (paid bandwidth) volume $\upsilon_s$ ($\upsilon_{bp}$), the platform's profit $\Pi$ is:
\begin{equation*}
\Pi(p_s, p_b) = (1-\alpha) (\theta \upsilon_s p_s + \upsilon_{bp} p_b).
\end{equation*}

\noindent While providers obtain the same revenue for the storage service from renters, their operating costs differ across $\rho_j$. Thus, provider $j$ would join the platform when the costs are lower than a certain threshold; that is, $\rho_j \le \rho_m$. Also, the total providers' storage volume used by the service is $V_s = \theta \upsilon_s$. Then, the provider surplus is calculated as:
\begin{equation*}
PS = \frac{\theta \upsilon_s}{\rho_m} \int_{0}^{\rho_m} \left[ \alpha \left(p_s + \frac{\upsilon_{bp}}{\theta \upsilon_s} p_b\right) - \rho \frac{\xi \upsilon_{b}}{\theta \upsilon_s}\right] d\rho.
\end{equation*}

\noindent For renter $i$, the value from service usage is $\lambda_i u_i$ and the service cost $c_i$ depends on the pricing scheme and the service fee ($p_s, p_b$). Her surplus is then calculated as $\lambda_i u_i - c_i$. As $\lambda_i$ and $u_i$ have renter-specific value whose probability distribution functions are $f(\lambda)$ and $1$ (i.e., $u_i \sim U[0, 1]$), respectively, we calculate the total surplus of renter as:
\begin{equation*}
RS = \int_{\lambda} \int_{u(\lambda)} \{\lambda u - c(\lambda, u) \}f(\lambda) du d\lambda.  
\end{equation*}

\noindent Then, we calculate the total surplus $TS$ as the sum of the platform's profit $\Pi$, provider surplus $PS$, and renter surplus $RS$ (i.e., $TS = \Pi + PS + RS$). Using the optimal service fees in each pricing scheme under the first-best prices in Lemma \ref{lem:pricing}, we obtain the platform's profit ($\Pi$) and the total surplus ($TS$) for each pricing scheme. Theorem \ref{thm:surplus_first} below shows the order of the platform's profit and the total system surplus under the first-best prices:

\begin{Theorem}\label{thm:surplus_first} 
Under the first best prices, the orders of the platform's profit and the total surplus in the three pricing schemes are determined as follows: \\
\begin{table}[h] \centering
\label{tbl:thm1}
    \begin{tabular}{l  l}
        Platform's profit & $\Pi^S  \le \Pi^{Hh} \le \Pi^{Hl} = \Pi^T $\\
        %Providers' surplus & $PS^S  \le PS^{Hh} \le PS^{Hl} = PS^T $\\
        %Renters' surplus & $RS^T = RS^{Hl} \le RS^{Hh} \le RS^S$\\
        Total surplus & $TS^T = TS^{Hl} \le TS^{Hh} \le TS^S$,
    \end{tabular}
\end{table}\\
where the superscripts $T$, $Hl$, $Hh$, and $S$ indicate the two-part tariff, the hybrid pricing with low $q(\le 1)$, the hybrid pricing with high $q(\ge 1)$, and the subscription-based pricing, respectively.
\end{Theorem}

Notably, the two-part tariff and the hybrid pricing with low $q$ yield equivalent outcomes (i.e., $\Pi^{T} = \Pi^{Hl}$ and $TS^T = TS^{Hl}$). As discussed in Lemma \ref{lem:pricing}, the free bandwidth allowance is smaller than any usage level of renters when $q < 1$ (i.e., $q\lambda_0 < \lambda_0$). Therefore, the platform under the hybrid pricing with low $q$ can increase $p_s$ up to the level where the platform can recover the revenue reduction from the bandwidth service without losing renters. In this way, the platform can achieve the same revenue under the two-part tariff even when they offer a limited free bandwidth allowance.

In contrast, an increase in $q$ above 1 lowers the profit of the platform (i.e., $\Pi^{Hh} \le \Pi^{Hl}$) and leads to a higher total surplus (i.e., $TS^{Hh} \ge TS^{Hl}$). The free bandwidth allowance above $\lambda_0$ enables some renters to use the entire bandwidth without the bandwidth service cost. To charge these renters, the platform would raise the storage service fee. Still, this does not fully recover the revenue loss from free-download volume from renters. Note that the subscription-based pricing, which offers the unlimited free bandwidth allowance, can be understood as an extreme case of the hybrid pricing. As $q$ increases further and goes to infinity, the platform obtains the lowest profit, and the system surplus reaches its highest value.

Remarkably, all pricing schemes attract the same number of renters to the platform under the first-best prices. Therefore, the differences in the total surplus are mainly driven by the difference in the usage level of renters instead of the total size of renters. Specifically, as $q$ increases, renters with a higher usage level $\lambda$---who gain a relatively high utility compared to those with a lower $\lambda$---are more likely to adopt the platform. In this way, the renters' benefit from an increase in $q$ outweighs the loss of profits, which increases the system surplus.


\subsection{Market-clearing}




We now examine how the optimal service fees of the platform change when the size of potential providers is not sufficient to meet the storage demand from renters. We find that the platform should set the market-clearing prices to incentivize providers. Specifically, for a given pricing scheme, the platform is better off by increasing both $p_s$ and $p_b$ until the number of participating providers equals the number of renters willing to adopt the platform. Alternatively, the platform may incentivize providers by lowering $q$ to fulfill the storage demand from renters (Lemma \ref{lem:threshold}). However, since a lower free bandwidth allowance can reduce renters' utility---particularly those with a high usage level, this approach also accompanies an increase in service costs imposed on renters. 

We analyze the trade-off between increasing service fees until the market-clearing prices and reducing the free bandwidth allowance and obtain the following results.

\begin{Theorem}\label{thm:surplus_market}
When the first-best price is not feasible for some pricing schemes, there exist $\underline{\psi}$ as the size of potential providers that satisfy $0  \le \underline{\psi} \le \psi^T < \psi^S$. Then, the platform's profit and total surplus in the three pricing schemes have the following orders. %of pricing schemes by the platform's profit and total surplus. %, having the following characteristics:

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is moderate such that $\psi^T \le n_p \le \psi^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing, i.e., $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$.
    \item When $n_p$ is small such that $\underline{\psi} \le n_p \le \psi^T $, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$.
\end{enumerate} 
\end{Theorem}

Theorem \ref{thm:surplus_market} suggests that the effectiveness of pricing schemes is highly contingent upon the number of potential providers $n_p$ in the market. When $n_p$ is large such that $n_p \ge \psi^S $, the platform can set the first-best prices. Hence, all results in Theorem \ref{thm:surplus_first} hold, and the subscription-based pricing---which creates the renter surplus most---always yields the highest total surplus. However, as $n_p$ decreases, the first-best prices become insufficient to incentivize providers. Hence, the platform should give a higher reward to each provider to maintain the same level of capacity. This result indicates that the size of potential providers needs to be carefully considered in the platform's pricing decisions. 

We further investigate how the optimal service fees in the pricing schemes interplay with $n_p$ and find the following results. First, as $n_p$ is moderate such that $\psi^T \le n_p \le \psi^S$, there exists some hybrid pricing with $q \ge 1$ that outweighs the subscription-based pricing in terms of the total surplus as well as the platform's profit.
%The moderate number of $n_p$ prevents the platform from raising $p_s$ too high. Thus, compared to the above case, the subscription-based pricing begets a substantially larger renter surplus, while the two-part tariff---which is mainly effective in rewarding providers---does not. Instead, the platform can always be better off by developing dominant hybrid pricing with $q \ge 1$ than the subscription-based pricing. It reduces the platform's profit compared to that in the two-part tariff, but it can increase the total surplus by making a larger renter surplus. However, the hybrid pricing still yields the renter surplus less than that in the subscription-based pricing.
As suggested by Lemma \ref{lem:threshold}, the first-best prices are not applicable for the subscription-based pricing when $n_p$ is moderate; hence, the profit-seeking platform needs to adopt the market-clearing prices to incentivize providers and avoid rationing renters who are willing to pay for the service. Thus, the subscription-based pricing experiences a significant decline in the platform's profit, the provider surplus, and the renter surplus. Alternatively, the platform may achieve the first-best prices by reducing the free bandwidth allowance. By balancing the incentive for providers and the renters' utility from the free bandwidth allowance, the platform can achieve a higher total surplus when the number of potential providers is comparable to the number of potential renters.

Second, we show that the two-part tariff dominates the subscription-based pricing in terms of the platform's profit and the total surplus, when $n_p$ is small such that $\underline{\psi} \le n_p \le \psi^T $. In this case, the platform should attract a large proportion of potential providers to meet the same storage demand from renters. Then, the free bandwidth allowance affects the platform's ability to fulfill the storage demand more adversely. The platform needs to set strikingly high subscription fees to compensate for this adverse effect, and consequently, the renter surplus---the main advantage of the subscription-based pricing---substantially decreases. In contrast, the two-part tariff can maintain the required capacity for market-clearing with relatively cheap service fees because it rewards providers for all bandwidth provision. As a consequence, the two-part tariff can achieve a higher system surplus than the subscription-based pricing, implying that rewarding providers could be more beneficial to the entire system than focusing on the renter surplus.%\footnote{We discuss $n_p$ below $\underline{\psi}$ in the proof of Theorem \ref{thm:surplus_market}. Our findings suggest that, for $\alpha < 0.771$, $\underline{\psi} = 0$ and $TS^S \le TS^T$ for every small $n_p$. Conversely, for $\alpha \ge 0.771$, $TS^T \le TS^S$ can happen when $n_p$ is extremely small.}



Recall that the P2P storage platform uses the redundancy rate denoted by $\theta$ and the uptime level $t$ to avoid security problems and ensure a high level of capacity availability. %Thus far, we have investigated the platform's optimal service fees in a pricing scheme for a given redundancy algorithm ($\theta$, $t$). However, 
In this subsection, we consider the situation where the platform determines the optimal redundancy algorithm endogenously by considering its potential consequences. The redundancy algorithm may affect the behavior of renters and providers in the following ways. First, a higher redundancy rate $\theta$ indicates that each renter contracts with a larger number of providers for the same volume of files. This incurs a higher storage cost to renters and a higher storage revenue to providers, which prohibits renters from adopting the platform. In contrast, an increase in the storage revenue encourages providers to join the platform. Second, the bandwidth volume transmitted through each provider decreases with $\theta$. Since more providers share the given bandwidth demand as $\theta$ increases, the bandwidth revenue and the operating cost for each provider decreases. Third, a higher $\theta$ leads to a lower uptime $t$ to meet the intended availability level, lowering each provider's operating cost. In this 
section, we verify the above arguments when the platform determines the redundancy algorithm endogenously, and we summarize our findings in Theorem \ref{thm:redundancy}.


\begin{Theorem}\label{thm:redundancy}

For the size of potential providers  $\underline{\psi}_{\theta, t}$ that satisfies $0 \le \underline{\psi}_{\theta, t} \le \psi_{\theta, t}^T < \psi_{\theta, t}^S$ for $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$, the platform's profit and the total surplus in the three pricing schemes have the following orders.

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is large such that $n_p \ge \psi_{\theta, t}^S$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
    \item When $n_p$ is moderate such that $\psi_{\theta, t}^T \le n_p \le \psi_{\theta, t}^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})).
    \item When $n_p$ is small such that $\underline{\psi}_{\theta, t} \le n_p \le \psi_{\theta, t}^T$, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
    \end{enumerate}

\end{Theorem}

The theorem shows that an endogenously determined redundancy algorithm does not alter our results in Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market}. Specifically, the platform's redundancy algorithm decision affects providers' total operating costs, which is proportional to $\xi \theta$, where $\xi$ is an increasing function of uptime $t$. A lowered operating cost then implies that the P2P storage network is more efficient and attractive to potential providers, which leads to a larger number of providers or sometimes enables the first-best prices. Hence, the platform is always better off by reducing the operating cost. Furthermore, since $\xi \theta$ does not vary by pricing schemes considered in this paper, the optimal ($\theta$, $t$) is identical across the schemes. This suggests that an endogenously determined algorithm makes no difference in our main findings. Moreover, these results demonstrate that the P2P storage platform's two-sided aspect---relying on shared resources of independent providers---needs to be carefully incorporated when determining the redundancy algorithm.
%








\section{Model Extension and Discussion}\label{sec:analysis3}

\yj{Thus far, we have investigated the platform's optimal service fees in a pricing scheme for a given redundancy algorithm or commission rate. In this section, we examine the impact of the platform's endogenous decisions on these operations decisions on the platform's profit and the total surplus.}

\subsection{Endogenous Decision on Commission Rates}\label{subsec:endo_alpha}

In this subsection, we investigate the impact of an endogenously determined commission rate of the P2P storage platform. In this situation, the platform can choose a commission rate to better maximize its profit. Also, it is possible that such a benefit may be amplified under a non-flexible pricing scheme (e.g., the subscription-based pricing). To verify the possibility that the endogenous selection of commission rates affects our findings, we re-analyze our model by considering $\alpha$ as a decision variable as well as $p_s$ and $p_b$. Theorem \ref{thm:alpha} summarizes the results. 

\begin{Theorem}\label{thm:alpha}
If the profit-seeking platform endogenously determines the commission rate, 
there exist $\bar{\psi}_{\alpha}$ as the size of potential providers that satisfy $0 \le \psi_{\alpha}^T \le \bar{\psi}_{\alpha} \le \psi_{\alpha}^S$, where $\psi_{\alpha}^T \equiv \frac{1}{2}\xi \theta n_r$ and $\psi_{\alpha}^S \equiv 3 \xi \theta n_r$. Then, the platform's profit and the total surplus in the three pricing schemes have the following orders.

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is large such that $n_p \ge \bar{\psi}_{\alpha}$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
    \item When $n_p$ is moderate such that  
    $\psi_{\alpha}^T \le n_p \le \bar{\psi}_{\alpha}$, a hybrid pricing with some $q \ge 1$ dominates the subscription-based pricing. That is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})),
    \item When $n_p$ is small such that $0 \le n_p \le \psi_{\alpha}^T$, the two-part tariff dominates the subscription-based pricing. That is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
\end{enumerate}
\end{Theorem}

The theorem shows that our main insights obtained in Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market} continue to hold, although the thresholds for the first-best prices change. Specifically, we observe that the relative orders of pricing schemes by the platform's profit and the total surplus do not change by the endogeneity of the commission rate. This suggests that it is still crucial for the platform to incentivize providers, even when the platform is free to alter its commission rate.

Although the results from endogenous commission rates are consistent with our main findings, they should be interpreted with caution for the following reasons. First, two-sided platforms need to consider public sentiment as well as their profits carefully because they often encounter public controversies regarding whether they fairly reward providers \citep{gartenberg2021google, scheiber2015growth}. Second, potential competition and regulations might inhibit platforms from choosing the high commission rates as they wish to providers. Even when competitors are not strong or even absent, unsatisfactory rewards for storage supply might encourage new entrants to grow their shares in the market. Lastly, the suggested commission rates might be unrealistic. Sia's commission rate is about 3.9\%, and mobile app stores---i.e., Google Play and Apple's App Store---charge 30\% to app providers. Considering the fierce resistance to 30\% commission rates in app markets \citep{gartenberg2021google}, 67\% or higher commission rates might not be a viable option.\footnote{Please refer to the proof in Appendix \ref{app:proof} for the magnitudes of the commission rates.} For these reasons, the assumption of exogenous commission rates can be reasonably acceptable in our context.
%
%

\subsection{Numerical study?}


\section{Discussion}






\subsection{Market-clearing prices}
\begin{Lemma}\label{lem:threshold} The platform's optimal service fees belong to the market-clearing prices when the number of potential providers $n_p$ is lower than the threshold $\psi$, which is calculated as:
%
\begin{equation*}
\begin{aligned}
    &\psi = \begin{cases}
    \frac{\xi \theta }{\alpha} n_r  &\text{ for the two-part tariff and the hybrid pricing with } q\le 1,\\
    \frac{5q^3 -3 q^2 + 3q - 2}{3q^3 + 3q^2 - 3q} \frac{\xi \theta }{\alpha} n_r   &\text{ for the hybrid pricing with } q \ge 1,\\
    \frac{5}{3}\frac{\xi \theta }{\alpha} n_r &\text{ for the subscription-based pricing,}
    \end{cases}
    \end{aligned}
\end{equation*}
%Also, when $n_p < \underline{n}_p$, the optimal service fees of the platform decrease in $n_p$ and satisfy the market-clearing condition.
and the optimal service fees of the platform decrease in $n_p$ when $n_p \le \psi$. 
\end{Lemma}

\yj{Add Lemma for market clearing price?}


\section{Optimal redundancy}
\subsection{Optimal redundancy?}

\subsection{Profit and surplus}
\begin{Theorem}\label{thm:surplus_first} 
Under the first best prices, the orders of the platform's profit and the total surplus in the three pricing schemes are determined as follows: \\
\begin{table}[h] \centering
\label{tbl:thm1}
    \begin{tabular}{l  l}
        Platform's profit & $\Pi^S  \le \Pi^{Hh} \le \Pi^{Hl} = \Pi^T $\\
        %Providers' surplus & $PS^S  \le PS^{Hh} \le PS^{Hl} = PS^T $\\
        %Renters' surplus & $RS^T = RS^{Hl} \le RS^{Hh} \le RS^S$\\
        Total surplus & $TS^T = TS^{Hl} \le TS^{Hh} \le TS^S$,
    \end{tabular}
\end{table}\\
where the superscripts $T$, $Hl$, $Hh$, and $S$ indicate the two-part tariff, the hybrid pricing with low $q(\le 1)$, the hybrid pricing with high $q(\ge 1)$, and the subscription-based pricing, respectively.
\end{Theorem}


\begin{Theorem}\label{thm:redundancy}
Also, for the size of potential providers  $\underline{\psi}_{\theta, t}$ that satisfies $0 \le \underline{\psi}_{\theta, t} \le \psi_{\theta, t}^T < \psi_{\theta, t}^S$ for $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$, the platform's profit and the total surplus in the three pricing schemes have the following orders.

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is large such that $n_p \ge \psi_{\theta, t}^S$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
    \item When $n_p$ is moderate such that $\psi_{\theta, t}^T \le n_p \le \psi_{\theta, t}^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})).
    \item When $n_p$ is small such that $\underline{\psi}_{\theta, t} \le n_p \le \psi_{\theta, t}^T$, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
    \end{enumerate}

%\noindent where $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$.

\end{Theorem}











\newpage









\section{Analysis of First-Best Prices}\label{sec:analysis1}

In this section, we consider a pricing decision that maximizes the renters' total payment when the market has a sufficient number of potential providers to fully satisfy the renters' storage demand (hereafter, \textit{the first-best prices}). In other words, the first-best prices maximize the platform's profit when only renters' willingness to pay matters. Figure \ref{fig:taxonomy} illustrates the taxonomy of pricing schemes and pricing decisions. Under the first-best prices, we compare the optimal service fees, the platform's profit, and the system surplus for the three pricing schemes we study in this paper.

\begin{figure}[ht!]
\centering
\includegraphics[width=16cm]{old_figure/fig2_pricing_taxonomy.pdf} 
\textbf{\caption{Taxonomy of Pricing Schemes and Pricing Decisions\label{fig:taxonomy}}}
\end{figure}

\subsection{Optimal Service Fees for Each Pricing Scheme}\label{subsec:first_fee}
We define the first-best prices of service fees ($p_s, p_b$) as the service fees that maximize the platform's profit when the number of potential providers is sufficient to meet the storage demand from renters. In other words, this implies that the platform finds such service fees optimal for its profit when it does not have to be concerned about the availability of the storage capacity from potential providers in the market. We analyze and compare the optimal service fees for each of the three pricing schemes we consider in this paper. Henceforth, we denote the two-part tariff, the subscription-based pricing, and the hybrid pricing by superscripts $T$, $S$, and $H$, respectively.

\textbf{\textit{Two-part Tariff.}} In this pricing scheme, the platform charges renters the lump-sum storage fee $p_s$ for using the storage space and the pay-per-use bandwidth fee $p_b$ for each download request (the unit bandwidth volume) to the stored files. In the two-part tariff, the total service cost of renter $i$ for the P2P storage service is expressed as $c_i(p_s, p_b, \lambda_i) = \theta p_s + \lambda_i p_b $. In this cost, $\theta p_s$ represents the storage service cost with the redundancy rate $\theta$, whereas $\lambda_i p_b$ refers to the bandwidth service cost with the bandwidth usage level $\lambda_i$. The utility of renter $i$ is then represented as the value of using the storage service subtracted by the total service cost, i.e., $U_i = \lambda_i u_i - \theta p_s - \lambda_i p_b$. Renter $i$ in the two-part tariff would adopt the P2P storage platform if her value of the storage service exceeds the service costs (i.e., $U_i \ge 0$). We define $u^T(\lambda) \equiv \frac{\theta p_s}{\lambda} + p_b$, which indicates the lower bound of $u_i$ for renters who adopt the service with given bandwidth usage level $\lambda$ in the two-part tariff. Then, renter $i$ would adopt the platform if and only if $u_i \ge u^T(\lambda)$. Considering the distribution function of renters' bandwidth usage levels $\lambda$, we obtain the total expected storage demand and bandwidth demand from renters in the two-part tariff, denoted by $\upsilon_s^T$ and $\upsilon_b^T$, as: %the free download volume of bandwidth service $\upsilon_{bf}$, and the paid download volume $\upsilon_{bp}$ under a two-part tariff as:

\begin{equation*}
\begin{aligned}
&\upsilon_s^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} f(\lambda) d \lambda,\\
&\upsilon_{b}^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} \lambda f(\lambda) d \lambda \; (=\upsilon_{bp}^T),\\
&\text{where } \lambda^T = \frac{\theta p_s}{1-p_b}.
%&\upsilon_{bf}^T = 0\\
\end{aligned}
\end{equation*}
We also note that the free download volume of the bandwidth service $\upsilon_{bf}^T$ is zero because the platform does not offer the free bandwidth allowance in the two-part tariff. % renters pay the bandwidth fee for all usage of bandwidth service.
%Then, the expected download volume by renters that is subject to the bandwidth service fee in the two-part tariff, denoted by $\upsilon_{bp}^T$, equals $\upsilon_s^T$. %is expressed as:
%\begin{equation*}
%\begin{aligned}
%&\upsilon_s^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} f(\lambda) d \lambda. %\\
%&\upsilon_{bp}^T = \int_{\max\{\lambda_0, \lambda^T\}}^{\infty} \{1-u^T(\lambda)\} \lambda f(\lambda) d \lambda.
%&\upsilon_{bf}^T = 0\\
%\end{aligned}
%\end{equation*}

\textbf{\textit{Subscription-based Pricing.}} When the platform adopts the subscription-based pricing, it charges only a lump-sum fee for the storage service and offers the bandwidth service for free. Therefore, regardless of service usage level $\lambda$, renter $i$'s total service cost only consists of the storage fee multiplied by the redundancy rate (i.e., $c_i(p_s, p_b, \lambda_i) = \theta p_s$). Then, renter $i$'s utility is expressed as $U_i = \lambda_i u_i - \theta p_s$. Similarly to $u^T(\lambda)$, we define $u^S(\lambda) = \frac{\theta p_s }{\lambda}$ as the lowest $u_i$ of renters that adopt the P2P storage service for a given bandwidth usage level $\lambda$ in the subscription-based pricing. The expected total storage demand and bandwidth demand from renters with respect to renters' $\lambda$, which is denoted by $\upsilon_s^S$ and $\upsilon_b^S$ is expressed as: %, the free download volume of bandwidth service $\upsilon_{bf}$, and the paid download volume $\upsilon_{bp}$ under subscription-based pricing can be expressed as:
\begin{equation*}
\begin{aligned}
&\upsilon_s^S = \int_{\max\{\lambda_0, \lambda^S\}}^{\infty} \{1-u^S(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{b}^S = \int_{\max\{\lambda_0, \lambda^S\}}^{\infty} \{1-u^S(\lambda)\} \lambda f(\lambda) d \lambda \; (=\upsilon_{bf}^S),\\
%&\upsilon_{bp}^S = 0\\
&\text{where } \lambda^S = \theta p_s.
\end{aligned}
\end{equation*}
Since the platform does not charge renters the bandwidth fee for the download volume of the stored files, providers are not compensated for offering the bandwidth service. Accordingly, we have $\upsilon_{bp}^S = 0$. %Also, as the storage service fee is the only revenue source in the subscription-based pricing, the expected bandwidth volume that renters use for free equals $\upsilon_s^S$.

\textbf{\textit{Hybrid Pricing.}} In the hybrid pricing, the platform charges the storage fee $p_s$ and offers a free bandwidth allowance up to $q \lambda_0$, where $\lambda_0$ represents the minimum bandwidth usage level among all potential renters, and $q\, (\ge 0)$ refers to a coefficient of the free bandwidth allowance. Note that $q = 0$ makes the hybrid pricing equivalent to the two-part tariff. The platform charges the bandwidth fee $p_b$ for the bandwidth usage that exceeds $q \lambda_0$. Therefore, renter $i$'s service cost is calculated as $c_i(p_s, p_b, \lambda_i) = \theta p_s + \max\{\lambda_i - q \lambda_0, 0\} p_b$, and her utility is $U_i = \lambda_i u_i - \theta p_s - \max\{\lambda_i - q \lambda_0, 0\} p_b$. For the hybrid pricing, we define $u^H(\lambda) \equiv \frac{\theta p_s + p_b(\lambda - q \lambda_0)}{\lambda}$ as the lowest $u_i$ among renters who have a bandwidth usage level $\lambda$ and adopt the P2P storage service.

The characteristics of hybrid pricing substantially differ depending on the amount of the free bandwidth service $q \lambda_0$. Hereafter, we denote the hybrid pricing with $0 \le q \le 1$ and $q \ge 1$ by superscripts $Hl$ and $Hh$, respectively. When $0 \le q \le 1$, all renters that adopt the service have bandwidth usage levels higher than $q \lambda_0$. Thus, each renter will pay the bandwidth fee for the bandwidth usage exceeding the free bandwidth allowance, where the total bandwidth usage that is subject to bandwidth service cost is $\lambda_i - q \lambda_0$. As a result, $\upsilon_s^{Hl}$, $\upsilon_{bf}^{Hl}$, and $\upsilon_{bp}^{Hl}$ in the hybrid pricing with low $q$ (i.e., $q\in [0,1]$) are expressed as:
\begin{equation*}
\begin{aligned}
&\upsilon_s^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{bf}^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} q \lambda_0  f(\lambda) d \lambda,\\
&\upsilon_{bp}^{Hl} = \int_{\max\{\lambda_0, \lambda^H\}}^{\infty}  \{1-u^H(\lambda)\} (\lambda - q \lambda_0) f(\lambda) d \lambda,\\
&\text{where } \lambda^H = \frac{\theta p_s - q \lambda_0 p_b}{1 - p_b}.
\end{aligned}
\end{equation*}

In contrast, when $q \ge 1$, some renters that adopt the service may use the bandwidth usage level lower than $q\lambda_0$. These renters will only pay the storage service fee, just as in the case of subscription-based pricing. Other renters pay the bandwidth service cost for the bandwidth usage level that exceeds the free bandwidth allowance, i.e.,  $\lambda_i - q \lambda_0$. Accordingly, $\upsilon_s^{Hh}$, $\upsilon_{bf}^{Hh}$, and $\upsilon_{bp}^{Hh}$ in the hybrid pricing with high $q$ (i.e., $q\ge 1$) are calculated as below:
\begin{equation*}
\begin{aligned}
&\upsilon_s^{Hh} = \int_{\min\{q \lambda_0, \max\{\lambda_0, \lambda^S\}\}}^{q \lambda_0} \{1-u^S(\lambda)\} f(\lambda) d \lambda + \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} f(\lambda) d \lambda, \\
&\upsilon_{bf}^{Hh} = \int_{\min\{q \lambda_0, \max\{\lambda_0, \lambda^S\}\}}^{q \lambda_0} \{1-u^S(\lambda)\} \lambda f(\lambda) d \lambda + \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty} \{1-u^H(\lambda)\} q \lambda_0 f(\lambda) d \lambda,\\
&\upsilon_{bp}^{Hh} =  \int_{\max\{q \lambda_0, \lambda^H\}}^{\infty}  \{1-u^H(\lambda)\} (\lambda - q \lambda_0)f(\lambda) d \lambda.
\end{aligned}
\end{equation*}
 
Using the results of the bandwidth usage volume that is subject to the service fee, we obtain the optimal service fees for each pricing scheme in the first-best prices as shown in Lemma \ref{lem:pricing}.

\begin{Lemma}\label{lem:pricing}
For each pricing scheme, the first-best prices of the P2P storage platform results in the optimal service fees as below:

\begin{equation*}
    \left(p_s^o, p_b^o\right) = \begin{cases}
    \left(0, \frac{1}{2}\right) &\text{for the two-part tariff}\\
    \left(\frac{q \lambda_0}{2\theta}, \frac{1}{2} \right) &\text{for the hybrid pricing with } q \in [0,1]\\
    \left(\frac{3q(2q^2 - 1)}{2(4q^3-1)} \frac{\lambda_0}{\theta}, \frac{3q^2(2q-1)}{2(4q^3-1)}\right) &\text{for the hybrid pricing with } q\ge 1\\
    \left(\frac{3 \lambda_0}{4\theta}, -\right) &\text{for the subscription-based pricing}
    \end{cases}
\end{equation*}
and the optimal $p_s^o$ ($p_b^o$) is strictly (weakly) increasing in $q$.
\end{Lemma}

Figure \ref{fig:price} illustrates how the optimal service fees of the platform in the first-best prices ($p_s^o, p_b^o$) change as the coefficient of the free bandwidth service $q$ increases, as observed in Lemma \ref{lem:pricing}. 

\begin{figure}[ht!]
\centering
\includegraphics[scale=1.4]{old_figure/fig3_price_v2.pdf}
%\includegraphics[width=11cm]{fig3_price_v1.pdf} 
\textbf{\caption{Pricing Schemes and First-best Prices\label{fig:price}}}
\end{figure}

From the above lemma, we derive how the optimal service fees of the profit-maximizing platform change according to each pricing scheme, which can be understood as the price structure with different amounts of the free bandwidth allowance. Specifically, in the two-part tariff, the platform achieves the highest profit when it does not impose the storage fee (i.e., $p_s=0$) and charges the smallest bandwidth fee without any free amount of the bandwidth service. Since all bandwidth usage is subject to the bandwidth service fee in the two-part tariff, the platform is better off allowing renters to join the platform for free.

Second, when the amount of free bandwidth service increases (i.e., $q$ increases) for $0 \le q \le 1$, the platform's optimal service fees is achieved by increasing the storage service fee while keeping the same bandwidth service fee. This occurs when the platform offers the free-download volume below the lowest bandwidth usage level of all renters $\lambda_0$. That is, all potential renters have a higher $\lambda$ than the free bandwidth allowance and are subject to the bandwidth service fee. In this vein, the platform can exactly make up for the revenue loss by offering free downloads and increasing a lump-sum fee. As a result, all renters pay the same total service cost in this pricing scheme, as is the case of the two-part tariff.

Lastly, the platform is better off increasing $p_b$ as well as $p_s$ when the amount of free download exceeds the minimum usage $\lambda_0$, i.e., $q \in (1, \infty)$. Specifically, $q > 1$ implies that some renters enjoy the complete bandwidth service for free if their bandwidth usage levels are lower than $q \lambda_0$. %the platform offers the free-download volume more than the minimum bandwidth usage for some renters. Since these renters do not pay for and obtain higher utility from the bandwidth service, 
Then, the platform tends to fill this cost-utility gap by increasing the storage service fee to renters. Note that the hybrid pricing becomes equivalent to the subscription-based pricing when $q \rightarrow \infty$ because all renters can use the bandwidth for free. As a result, the platform's optimal storage fees for the hybrid pricing and the subscription-based pricing are the same. %T, while the bandwidth fee converges to not applicable due to not charging renters for the bandwidth service under the subscription-based pricing.


\subsection{Platform's Profit and System Surplus}\label{subsec:first_profit}
%Although the platform pursues its profit clearly, it might also be concerned about the surplus of other stakeholders. 
Since the P2P storage service uses a two-sided platform with renters and providers, it often matters whether this service improves each stakeholder's surplus. As such, two-sided platforms encounter public controversies regarding whether or not they fairly reward providers \citep{gartenberg2021google, scheiber2015growth}. Moreover, consumers and politicians are concerned about the possibility that customers are unfairly treated by large platforms \citep{kosoff2015newyorkcity}. Considering that such negative sentiments might incur substantive damages to the platform \citep{cachon2017role}, it is important to understand the potential tension between the platform's profit maximization and the other stakeholders' surplus. In this regard, we analyze the impact of pricing schemes on the overall system surplus as well as the platform's profit based on the results of Lemma \ref{lem:pricing}.

As described in Section \ref{subsec:problem}, under the given service fees ($p_s, p_b$) and the total storage (paid bandwidth) volume $\upsilon_s$ ($\upsilon_{bp}$), the platform's profit $\Pi$ is:
\begin{equation*}
\Pi(p_s, p_b) = (1-\alpha) (\theta \upsilon_s p_s + \upsilon_{bp} p_b).
\end{equation*}

\noindent While providers obtain the same revenue for the storage service from renters, their operating costs differ across $\rho_j$. Thus, provider $j$ would join the platform when the costs are lower than a certain threshold; that is, $\rho_j \le \rho_m$. Also, the total providers' storage volume used by the service is $V_s = \theta \upsilon_s$. Then, the provider surplus is calculated as:
\begin{equation*}
PS = \frac{\theta \upsilon_s}{\rho_m} \int_{0}^{\rho_m} \left[ \alpha \left(p_s + \frac{\upsilon_{bp}}{\theta \upsilon_s} p_b\right) - \rho \frac{\xi \upsilon_{b}}{\theta \upsilon_s}\right] d\rho.
\end{equation*}

\noindent For renter $i$, the value from service usage is $\lambda_i u_i$ and the service cost $c_i$ depends on the pricing scheme and the service fee ($p_s, p_b$). Her surplus is then calculated as $\lambda_i u_i - c_i$. As $\lambda_i$ and $u_i$ have renter-specific value whose probability distribution functions are $f(\lambda)$ and $1$ (i.e., $u_i \sim U[0, 1]$), respectively, we calculate the total surplus of renter as:
\begin{equation*}
RS = \int_{\lambda} \int_{u(\lambda)} \{\lambda u - c(\lambda, u) \}f(\lambda) du d\lambda.  
\end{equation*}

\noindent Then, we calculate the total surplus $TS$ as the sum of the platform's profit $\Pi$, provider surplus $PS$, and renter surplus $RS$ (i.e., $TS = \Pi + PS + RS$). Using the optimal service fees in each pricing scheme under the first-best prices in Lemma \ref{lem:pricing}, we obtain the platform's profit ($\Pi$) and the total surplus ($TS$) for each pricing scheme. Theorem \ref{thm:surplus_first} below shows the order of the platform's profit and the total system surplus under the first-best prices:

\begin{Theorem}\label{thm:surplus_first} 
Under the first best prices, the orders of the platform's profit and the total surplus in the three pricing schemes are determined as follows: \\
\begin{table}[h] \centering
\label{tbl:thm1}
    \begin{tabular}{l  l}
        Platform's profit & $\Pi^S  \le \Pi^{Hh} \le \Pi^{Hl} = \Pi^T $\\
        %Providers' surplus & $PS^S  \le PS^{Hh} \le PS^{Hl} = PS^T $\\
        %Renters' surplus & $RS^T = RS^{Hl} \le RS^{Hh} \le RS^S$\\
        Total surplus & $TS^T = TS^{Hl} \le TS^{Hh} \le TS^S$,
    \end{tabular}
\end{table}\\
where the superscripts $T$, $Hl$, $Hh$, and $S$ indicate the two-part tariff, the hybrid pricing with low $q(\le 1)$, the hybrid pricing with high $q(\ge 1)$, and the subscription-based pricing, respectively.
\end{Theorem}

Notably, the two-part tariff and the hybrid pricing with low $q$ yield equivalent outcomes (i.e., $\Pi^{T} = \Pi^{Hl}$ and $TS^T = TS^{Hl}$). As discussed in Lemma \ref{lem:pricing}, the free bandwidth allowance is smaller than any usage level of renters when $q < 1$ (i.e., $q\lambda_0 < \lambda_0$). Therefore, the platform under the hybrid pricing with low $q$ can increase $p_s$ up to the level where the platform can recover the revenue reduction from the bandwidth service without losing renters. In this way, the platform can achieve the same revenue under the two-part tariff even when they offer a limited free bandwidth allowance.

In contrast, an increase in $q$ above 1 lowers the profit of the platform (i.e., $\Pi^{Hh} \le \Pi^{Hl}$) and leads to a higher total surplus (i.e., $TS^{Hh} \ge TS^{Hl}$). The free bandwidth allowance above $\lambda_0$ enables some renters to use the entire bandwidth without the bandwidth service cost. To charge these renters, the platform would raise the storage service fee. Still, this does not fully recover the revenue loss from free-download volume from renters. Note that the subscription-based pricing, which offers the unlimited free bandwidth allowance, can be understood as an extreme case of the hybrid pricing. As $q$ increases further and goes to infinity, the platform obtains the lowest profit, and the system surplus reaches its highest value.

Remarkably, all pricing schemes attract the same number of renters to the platform under the first-best prices. Therefore, the differences in the total surplus are mainly driven by the difference in the usage level of renters instead of the total size of renters. Specifically, as $q$ increases, renters with a higher usage level $\lambda$---who gain a relatively high utility compared to those with a lower $\lambda$---are more likely to adopt the platform. In this way, the renters' benefit from an increase in $q$ outweighs the loss of profits, which increases the system surplus.


\section{Analysis of Market-Clearing Prices}\label{sec:analysis2}

In this section, we consider the situation where renters are rationed by the supply level due to the insufficient number of potential providers in the market compared to the storage demand from renters (i.e., \textit{the market-clearing prices}). We investigate how this supply-side restriction affects the platform's profit and system surplus for the three pricing schemes that we study in this paper.

To do so, we first investigate the required number of providers for the first-best prices. Lemma \ref{lem:threshold} summarizes this result. 

\begin{Lemma}\label{lem:threshold} The platform's optimal service fees belong to the market-clearing prices when the number of potential providers $n_p$ is lower than the threshold $\psi$, which is calculated as:
%
\begin{equation*}
\begin{aligned}
    &\psi = \begin{cases}
    \frac{\xi \theta }{\alpha} n_r  &\text{ for the two-part tariff and the hybrid pricing with } q\le 1,\\
    \frac{5q^3 -3 q^2 + 3q - 2}{3q^3 + 3q^2 - 3q} \frac{\xi \theta }{\alpha} n_r   &\text{ for the hybrid pricing with } q \ge 1,\\
    \frac{5}{3}\frac{\xi \theta }{\alpha} n_r &\text{ for the subscription-based pricing,}
    \end{cases}
    \end{aligned}
\end{equation*}
%Also, when $n_p < \underline{n}_p$, the optimal service fees of the platform decrease in $n_p$ and satisfy the market-clearing condition.
and the optimal service fees of the platform decrease in $n_p$ when $n_p \le \psi$. 
\end{Lemma}

\begin{figure}[ht!]
\centering
\includegraphics[scale=1.4]{old_figure/fig4_psi_v2.pdf} 
\textbf{\caption{Free Bandwidth Allowance and First-best Price Thresholds\label{fig:first_best}}}
\end{figure}

For simplicity, we denote the thresholds of the two-part tariff and the subscription-based pricing by $\psi^T$ and $\psi^S$, respectively. Figure \ref{fig:first_best} illustrates how the first-best price threshold $n_p$ changes with respect to the coefficient of free bandwidth allowance $q$ in the hybrid pricing as shown in Lemma \ref{lem:threshold}. Specifically, when there are ample potential providers in the market compared to the threshold, the platform can achieve the highest profit using the first-best prices. Otherwise, such prices do not sufficiently incentivize providers to satisfy the storage demand from renters. As presented in Figure \ref{fig:first_best}, the threshold increases in $q$, suggesting that a high free bandwidth allowance discourages providers from participating in the platform due to a high operating cost involved with it. We also find that the threshold increases in $\xi \theta$, and it  decreases in $\alpha$. Note that $\xi \theta$ is proportional to the total operating cost of providers, while $\alpha$ indicates the providers' revenue share. Therefore, these results indicate that the first-best prices become less feasible as providers' profitability decreases.

We now examine how the optimal service fees of the platform change when the size of potential providers is not sufficient to meet the storage demand from renters. We find that the platform should set the market-clearing prices to incentivize providers. Specifically, for a given pricing scheme, the platform is better off by increasing both $p_s$ and $p_b$ until the number of participating providers equals the number of renters willing to adopt the platform. Alternatively, the platform may incentivize providers by lowering $q$ to fulfill the storage demand from renters (Lemma \ref{lem:threshold}). However, since a lower free bandwidth allowance can reduce renters' utility---particularly those with a high usage level, this approach also accompanies an increase in service costs imposed on renters. 

We analyze the trade-off between increasing service fees until the market-clearing prices and reducing the free bandwidth allowance and obtain the following results.

% \begin{Theorem}\label{thm:surplus_market}
% When the first-best price is not feasible for some pricing schemes, there exist $\underline{\psi}$ and $\bar{\psi}$ as the size of potential providers that satisfy $0 \le \underline{\psi} \le \psi^T \le \bar{\psi} \le \psi^S$. Then, the platform's profit and total surplus in the three pricing schemes have the following orders. %of pricing schemes by the platform's profit and total surplus. %, having the following characteristics:

% \begin{enumerate}[label=(\roman*)]
%     \item When $n_p$ is moderate such that $\bar{\psi} \le n_p \le \psi^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing, i.e., $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$.
%     \item When $n_p$ is small such that $\underline{\psi} \le n_p \le \bar{\psi} $, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$.
% \end{enumerate} 
% \end{Theorem}

\begin{Theorem}\label{thm:surplus_market}
When the first-best price is not feasible for some pricing schemes, there exist $\underline{\psi}$ as the size of potential providers that satisfy $0  \le \underline{\psi} \le \psi^T < \psi^S$. Then, the platform's profit and total surplus in the three pricing schemes have the following orders. %of pricing schemes by the platform's profit and total surplus. %, having the following characteristics:

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is moderate such that $\psi^T \le n_p \le \psi^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing, i.e., $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$.
    \item When $n_p$ is small such that $\underline{\psi} \le n_p \le \psi^T $, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$.
\end{enumerate} 
\end{Theorem}

Theorem \ref{thm:surplus_market} suggests that the effectiveness of pricing schemes is highly contingent upon the number of potential providers $n_p$ in the market. When $n_p$ is large such that $n_p \ge \psi^S $, the platform can set the first-best prices. Hence, all results in Theorem \ref{thm:surplus_first} hold, and the subscription-based pricing---which creates the renter surplus most---always yields the highest total surplus. However, as $n_p$ decreases, the first-best prices become insufficient to incentivize providers. Hence, the platform should give a higher reward to each provider to maintain the same level of capacity. This result indicates that the size of potential providers needs to be carefully considered in the platform's pricing decisions. 

We further investigate how the optimal service fees in the pricing schemes interplay with $n_p$ and find the following results. First, as $n_p$ is moderate such that $\psi^T \le n_p \le \psi^S$, there exists some hybrid pricing with $q \ge 1$ that outweighs the subscription-based pricing in terms of the total surplus as well as the platform's profit.
%The moderate number of $n_p$ prevents the platform from raising $p_s$ too high. Thus, compared to the above case, the subscription-based pricing begets a substantially larger renter surplus, while the two-part tariff---which is mainly effective in rewarding providers---does not. Instead, the platform can always be better off by developing dominant hybrid pricing with $q \ge 1$ than the subscription-based pricing. It reduces the platform's profit compared to that in the two-part tariff, but it can increase the total surplus by making a larger renter surplus. However, the hybrid pricing still yields the renter surplus less than that in the subscription-based pricing.
As suggested by Lemma \ref{lem:threshold}, the first-best prices are not applicable for the subscription-based pricing when $n_p$ is moderate; hence, the profit-seeking platform needs to adopt the market-clearing prices to incentivize providers and avoid rationing renters who are willing to pay for the service. Thus, the subscription-based pricing experiences a significant decline in the platform's profit, the provider surplus, and the renter surplus. Alternatively, the platform may achieve the first-best prices by reducing the free bandwidth allowance. By balancing the incentive for providers and the renters' utility from the free bandwidth allowance, the platform can achieve a higher total surplus when the number of potential providers is comparable to the number of potential renters.

Second, we show that the two-part tariff dominates the subscription-based pricing in terms of the platform's profit and the total surplus, when $n_p$ is small such that $\underline{\psi} \le n_p \le \psi^T $. In this case, the platform should attract a large proportion of potential providers to meet the same storage demand from renters. Then, the free bandwidth allowance affects the platform's ability to fulfill the storage demand more adversely. The platform needs to set strikingly high subscription fees to compensate for this adverse effect, and consequently, the renter surplus---the main advantage of the subscription-based pricing---substantially decreases. In contrast, the two-part tariff can maintain the required capacity for market-clearing with relatively cheap service fees because it rewards providers for all bandwidth provision. As a consequence, the two-part tariff can achieve a higher system surplus than the subscription-based pricing, implying that rewarding providers could be more beneficial to the entire system than focusing on the renter surplus.%\footnote{We discuss $n_p$ below $\underline{\psi}$ in the proof of Theorem \ref{thm:surplus_market}. Our findings suggest that, for $\alpha < 0.771$, $\underline{\psi} = 0$ and $TS^S \le TS^T$ for every small $n_p$. Conversely, for $\alpha \ge 0.771$, $TS^T \le TS^S$ can happen when $n_p$ is extremely small.}

\section{Analysis of Platform's Endogenous Operations Decisions}\label{sec:analysis3}
Thus far, we have investigated the platform's optimal service fees in a pricing scheme for a given redundancy algorithm or commission rate. In this section, we examine the impact of the platform's endogenous decisions on these operations decisions on the platform's profit and the total surplus.

\subsection{The Platform's Endogenous Decision on Redundancy Algorithms}\label{subsec:endo_algorithm}
Recall that the P2P storage platform uses the redundancy rate denoted by $\theta$ and the uptime level $t$ to avoid security problems and ensure a high level of capacity availability. %Thus far, we have investigated the platform's optimal service fees in a pricing scheme for a given redundancy algorithm ($\theta$, $t$). However, 
In this subsection, we consider the situation where the platform determines the optimal redundancy algorithm endogenously by considering its potential consequences. The redundancy algorithm may affect the behavior of renters and providers in the following ways. First, a higher redundancy rate $\theta$ indicates that each renter contracts with a larger number of providers for the same volume of files. This incurs a higher storage cost to renters and a higher storage revenue to providers, which prohibits renters from adopting the platform. In contrast, an increase in the storage revenue encourages providers to join the platform. Second, the bandwidth volume transmitted through each provider decreases with $\theta$. Since more providers share the given bandwidth demand as $\theta$ increases, the bandwidth revenue and the operating cost for each provider decreases. Third, a higher $\theta$ leads to a lower uptime $t$ to meet the intended availability level, lowering each provider's operating cost. In this 
section, we verify the above arguments when the platform determines the redundancy algorithm endogenously, and we summarize our findings in Theorem \ref{thm:redundancy}.

% $---------------------------------------------------$
% Under the endogenous decision on redundancy algorithm ($\theta$, $t$), the redundancy algorithm that minimizes $\xi \theta$ is optimal for the platform in all pricing schemes. Also, we obtain the orders of the platform's profit and the total surplus in the three pricing schemes as follows. %the results of Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market} hold. That is,

% \begin{enumerate}[label=(\roman*)]
%     \item When $n_p$ is large, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
%     \item When $n_p$ is moderately small, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market}).
%     \item When $n_p$ is moderate, there exists a hybrid pricing with some $q \ge 1$ dominating the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market}).
% \end{enumerate}

% $---------------------------------------------------$
% \begin{Theorem}\label{thm:redundancy}

% If the platform determines the redundancy algorithm endogenously, the optimal ($\theta$, $t$) is obtained by minimizing $\xi \theta$ in all pricing schemes. Also, %For the optimal algorithm ($\theta_m$, $t_m$), 
% for the sizes of potential providers  $\underline{\psi}_{\theta, t}$ and $\bar{\psi}_{\theta, t}$ that satisfy $0 \le \underline{\psi}_{\theta, t} \le \psi_{\theta, t}^T \le \bar{\psi}_{\theta, t} \le \psi_{\theta, t}^S$ for $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$, the platform's profit and the total surplus in the three pricing schemes have the following orders.

% \begin{enumerate}[label=(\roman*)]
%     \item When $n_p$ is large such that $n_p \ge \psi_{\theta, t}^S$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
%     \item When $n_p$ is moderate such that $\bar{\psi}_{\theta, t} \le n_p \le \psi_{\theta, t}^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})).
%     \item When $n_p$ is small such that     $\underline{\psi}_{\theta, t} \le n_p \le \bar{\psi}_{\theta, t}$, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
%     \end{enumerate}

% %\noindent where $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$.

% \end{Theorem}
%$----------------------------------------------------$

\begin{Theorem}\label{thm:redundancy}

If the platform determines the redundancy algorithm endogenously, the optimal ($\theta$, $t$) is obtained by minimizing $\xi \theta$ in all pricing schemes. Also, %For the optimal algorithm ($\theta_m$, $t_m$), 
for the size of potential providers  $\underline{\psi}_{\theta, t}$ that satisfies $0 \le \underline{\psi}_{\theta, t} \le \psi_{\theta, t}^T < \psi_{\theta, t}^S$ for $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$, the platform's profit and the total surplus in the three pricing schemes have the following orders.

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is large such that $n_p \ge \psi_{\theta, t}^S$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
    \item When $n_p$ is moderate such that $\psi_{\theta, t}^T \le n_p \le \psi_{\theta, t}^S$, a hybrid pricing with $q \ge 1$ can dominate the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})).
    \item When $n_p$ is small such that $\underline{\psi}_{\theta, t} \le n_p \le \psi_{\theta, t}^T$, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
    \end{enumerate}

%\noindent where $\psi_{\theta, t}^T \equiv \frac{\xi(t_m) \theta_m}{\alpha}n_r$ and $\psi_{\theta, t}^S \equiv \frac{5}{3}\frac{\xi(t_m) \theta_m}{\alpha}n_r$.

\end{Theorem}

The theorem shows that an endogenously determined redundancy algorithm does not alter our results in Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market}. Specifically, the platform's redundancy algorithm decision affects providers' total operating costs, which is proportional to $\xi \theta$, where $\xi$ is an increasing function of uptime $t$. A lowered operating cost then implies that the P2P storage network is more efficient and attractive to potential providers, which leads to a larger number of providers or sometimes enables the first-best prices. Hence, the platform is always better off by reducing the operating cost. Furthermore, since $\xi \theta$ does not vary by pricing schemes considered in this paper, the optimal ($\theta$, $t$) is identical across the schemes. This suggests that an endogenously determined algorithm makes no difference in our main findings. Moreover, these results demonstrate that the P2P storage platform's two-sided aspect---relying on shared resources of independent providers---needs to be carefully incorporated when determining the redundancy algorithm.
%
%
\subsection{The Platform's Endogenous Decision on Commission Rates}\label{subsec:endo_alpha}
In this subsection, we investigate the impact of an endogenously determined commission rate of the P2P storage platform. In this situation, the platform can choose a commission rate to better maximize its profit. Also, it is possible that such a benefit may be amplified under a non-flexible pricing scheme (e.g., the subscription-based pricing). To verify the possibility that the endogenous selection of commission rates affects our findings, we re-analyze our model by considering $\alpha$ as a decision variable as well as $p_s$ and $p_b$. Theorem \ref{thm:alpha} summarizes the results. 

% $---------------------------------------------------$

% %\begin{Theorem}\label{thm:alpha}
% When the profit-seeking platform endogenously determines the commission rate, the platform's profit and the total surplus in the three pricing schemes have the following orders. %are determined as follows. %Under commission rates $\alpha$, the results of Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market} are consistent; that is:

% \begin{enumerate}[label=(\roman*)]
% \item When $n_p$ is large, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the largest total surplus (Theorem \ref{thm:surplus_first}).

% \item When $n_p$ is moderately small, the two-part tariff dominates the subscription-based pricing; that is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market}).

% \item When $n_p$ is moderate, there exists a hybrid pricing with some $q \ge 1$ dominating the subscription-based pricing; that is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market}).
% \end{enumerate}

% %\end{Theorem}

% $---------------------------------------------------$
% \begin{Theorem}\label{thm:alpha}
% If the profit-seeking platform endogenously determines the commission rate, %the platform's profit and the total surplus in the three pricing schemes have the following orders. 
% there exist $\underline{\psi}_{\alpha}$ and $\bar{\psi}_{\alpha}$ as the size of potential providers that satisfy $0 \le \psi_{\alpha}^T \le \underline{\psi}_{\alpha}  \le \bar{\psi}_{\alpha} \le \psi_{\alpha}^S$, where $\psi_{\alpha}^T \equiv \frac{1}{2}\xi \theta n_r$ and $\psi_{\alpha}^S \equiv 3 \xi \theta n_r$. Then, the platform's profit and the total surplus in the three pricing schemes have the following orders.
% %leading to the following orders of the platform's profit and the total surplus in the three pricing schemes:

% \begin{enumerate}[label=(\roman*)]
%     \item When $n_p$ is large such that $n_p \ge \bar{\psi}_{\alpha}$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
%     \item When $n_p$ is moderate such that  
%     $\underline{\psi}_{\alpha} \le n_p \le \bar{\psi}_{\alpha}$, a hybrid pricing with some $q \ge 1$ dominates the subscription-based pricing. That is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})),
%     \item When $n_p$ is small such that $0 \le n_p \le \underline{\psi}_{\alpha}$, the two-part tariff dominates the subscription-based pricing. That is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
% \end{enumerate}
% %\noindent where $\psi_{\alpha}^T \equiv \frac{\xi \theta}{2}n_r$ and $\psi_{\alpha}^S \equiv 3 \xi \theta n_r$.
% \end{Theorem}

%$--------------------------------------------------$
\begin{Theorem}\label{thm:alpha}
If the profit-seeking platform endogenously determines the commission rate, %the platform's profit and the total surplus in the three pricing schemes have the following orders. 
there exist $\bar{\psi}_{\alpha}$ as the size of potential providers that satisfy $0 \le \psi_{\alpha}^T \le \bar{\psi}_{\alpha} \le \psi_{\alpha}^S$, where $\psi_{\alpha}^T \equiv \frac{1}{2}\xi \theta n_r$ and $\psi_{\alpha}^S \equiv 3 \xi \theta n_r$. Then, the platform's profit and the total surplus in the three pricing schemes have the following orders.
%leading to the following orders of the platform's profit and the total surplus in the three pricing schemes:

\begin{enumerate}[label=(\roman*)]
    \item When $n_p$ is large such that $n_p \ge \bar{\psi}_{\alpha}$, the two-part tariff generates the highest platform's profit, while the subscription-based pricing yields the highest total surplus (Theorem \ref{thm:surplus_first}).
    \item When $n_p$ is moderate such that  
    $\psi_{\alpha}^T \le n_p \le \bar{\psi}_{\alpha}$, a hybrid pricing with some $q \ge 1$ dominates the subscription-based pricing. That is, $\Pi^H \ge \Pi^S$ and $TS^H \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{i})),
    \item When $n_p$ is small such that $0 \le n_p \le \psi_{\alpha}^T$, the two-part tariff dominates the subscription-based pricing. That is, $\Pi^T \ge \Pi^S$ and $TS^T \ge TS^S$ (Theorem \ref{thm:surplus_market} (\textit{ii})).
\end{enumerate}
%\noindent where $\psi_{\alpha}^T \equiv \frac{\xi \theta}{2}n_r$ and $\psi_{\alpha}^S \equiv 3 \xi \theta n_r$.
\end{Theorem}


%Theorem \ref{thm:alpha} 
The theorem shows that our main insights obtained in Theorem \ref{thm:surplus_first} and Theorem \ref{thm:surplus_market} continue to hold, although the thresholds for the first-best prices change. Specifically, we observe that the relative orders of pricing schemes by the platform's profit and the total surplus do not change by the endogeneity of the commission rate. This suggests that it is still crucial for the platform to incentivize providers, even when the platform is free to alter its commission rate.

Although the results from endogenous commission rates are consistent with our main findings, they should be interpreted with caution for the following reasons. First, two-sided platforms need to consider public sentiment as well as their profits carefully because they often encounter public controversies regarding whether they fairly reward providers \citep{gartenberg2021google, scheiber2015growth}. Second, potential competition and regulations might inhibit platforms from choosing the high commission rates as they wish to providers. Even when competitors are not strong or even absent, unsatisfactory rewards for storage supply might encourage new entrants to grow their shares in the market. Lastly, the suggested commission rates might be unrealistic. Sia's commission rate is about 3.9\%, and mobile app stores---i.e., Google Play and Apple's App Store---charge 30\% to app providers. Considering the fierce resistance to 30\% commission rates in app markets \citep{gartenberg2021google}, 67\% or higher commission rates might not be a viable option.\footnote{Please refer to the proof in Appendix \ref{app:proof} for the magnitudes of the commission rates.} For these reasons, the assumption of exogenous commission rates can be reasonably acceptable in our context.
%
%
\section{Discussion and Conclusion}\label{sec:conclusion}

%(P1) Research summary
In this study, we developed a game-theoretic model to examine how the P2P storage platform's pricing schemes impact the platform's profit and the total system surplus. We considered three pricing schemes, one of which is widely employed by P2P storage platforms (the two-part tariff) while the others are widely adopted by conventional public cloud services (the subscription-based pricing and the hybrid pricing). We showed that when the first-best prices---which maximizes the platform's profit when the number of potential providers is sufficient---are applicable, the two-part tariff outperforms the other pricing schemes in terms of profit maximization, while the subscription-based pricing surpasses the others regarding the total surplus. Remarkably, we revealed that the relative influences of pricing schemes significantly change when the scarcity of potential providers is considered. When the number of potential providers is not sufficient to meet the storage demand, the platform cannot set the first-best prices, and instead, should employ the market-clearing prices wherein the supply and demand become equivalent. In this case, the two-part tariff and the hybrid pricing may dominate the subscription-based pricing regarding both the profit and the total surplus. To further validate our findings, we examined how endogenous redundancy algorithms and commission rates affect the results. We found that our key findings remain unchanged except the thresholds that enable the first-best prices.

%(P2-P3) Managerial implications for P2P storage platforms (as rich/concrete/applicable as possible)
Our findings provide numerous implications for P2P storage platforms that rely on independent suppliers and concern the surplus of stakeholders. We compared the currently adopted pricing scheme with other pricing schemes rarely used schemes by the P2P storage platforms and showed that the scarcity of potential providers plays a central role in determining the effects of pricing schemes. We showed that if there is a sufficiently large base of potential suppliers, the platform can enhance the total surplus of the system by adopting the subscription-based pricing instead of the two-part tariff. On the other hand, if the size of potential providers are not sufficient, the subscription-based pricing might lead to a lower surplus than the two-part tariff and the hybrid pricing, which ensure the higher profit for the platform. In addition, our results suggest that the effectiveness of a pricing scheme substantially interplays with the redundancy algorithm. Specifically, the two-part tariff and the hybrid pricing become increasingly effective as the redundancy algorithm requires a higher uptime and using a higher redundancy rate, raising providers' operating costs.

In this vein, our findings provide actionable insights that these platforms can directly apply. Given the immature stage of the P2P storage market, the platforms might want to expand the user base by increasing the total system surplus rather than seeking its short-term profit only. In doing so, they may consider adopting alternative pricing schemes that can yield a higher surplus than the two-part tariff. However, it could be demanding to attract potential providers to the platform, perhaps due to technical difficulties of sharing computing resources. If so, the P2P storage platform needs to further compensate providers' bandwidth provision rather than their storage capacity by lowering the free bandwidth allowance. It is also possible that the platform cannot alter its pricing scheme and service fees. In that case, the platform may indirectly incentivize providers by requiring a lower uptime or a lower redundancy rate. For instance, a $k$-of-$m$ erasure coding scheme with the same redundancy rate (i.e., the same $\frac{m}{k}$) can achieve the same availability while reducing its required uptime by increasing $k$ and $m$ at the same time.\footnote{Table \ref{tbl:redundancy_1} in Appendix \ref{app:algorithm} shows an example suggesting that the platform can exponentially reduce the failure probability while maintaining the redundancy rate.}

%(P4) Managerial implications for other types of platforms (as rich/concrete/applicable as possible)
Our research also provides managerial insights that other sharing platforms can also consider. We found that pricing schemes that further compensate providers can improve the total surplus when the size of potential suppliers is relatively scarce than consumers. Although other platforms often employ different pricing schemes, the underlying intuition could be similarly applied to these platforms. We showed that a rise in service prices could mitigate the situation where only a few providers have to endure high operating costs. In this regard, sharing platforms may consider heterogeneous pricing strategies across regions. For example, peer-to-peer delivery platforms serve various regions with different sizes of sellers, deliverers, and consumers. In regions where relatively scarce deliverers are bearing the delivery costs, the platforms may achieve not only higher profits but also a higher surplus of all stakeholders by further charging sellers/consumers. In contrast, the system surplus will be increased by lowering service prices when there are sufficient deliverers in the regions.

%(P5) Limitation and future research
We conclude by specifying some caveats and potential avenues for future research. First, we have analyzed only a monopoly market. The P2P storage market is highly immature and still rapidly growing, and several new entrants are threatening incumbent players. We expect that future research can significantly benefit from investigating the influence of competitors in this nascent market. Second, we have considered a homogeneous storage volume in order to focus on the interactions between renters and providers. Future studies should investigate whether and how the heterogeneity of storage volume affects our findings; for example, they can consider the hybrid pricing that offers a free storage volume. 
%other relevant players might also be considered in future studies. For instance, the growth of P2P storage platforms might lead to direct competition between P2P platforms and centralized cloud platforms such as Amazon Web services.
Lastly, our results are restricted to three pricing schemes, although many other pricing schemes can be considered. For instance, some public cloud services lower the unit price as the usage level increases. It can provide valuable insights to analyze how unexplored pricing schemes affect the platform's profit and the system surplus. 
%
%
\spacing{1.3}
	\bibliographystyle{informs2014}
	%\bibliographystyle{apacite}
	\bibliography{bib}

\newpage	
\appendix	
\section{Algorithmic Backgrounds}\label{app:algorithm}

In general, P2P storage platforms utilize erasure coding in their redundancy algorithms to ensure high levels of file availability. Under a $k$-of-$m$ erasure coding scheme, the P2P storage platform divides a renter's original file into $k$ shards and re-codes them into $m$ encrypted fragments ($m > k$) \citep{weatherspoon2002erasure, wilkinson2016storj}. Then, the platform assigns each of $m$ fragments to $m$ independent providers who have made a contract with the focal renter. Notably, any $k$ of $m$ fragments can reconstruct the file under this redundancy algorithm. Therefore, the platform can retrieve the file when any $k$ providers are connected to the network at the same time. As such, the main advantage of erasure coding is that it can achieve high reliability with a low redundancy rate $\theta(=\frac{m}{k})$ \citep{weatherspoon2002erasure}. We can easily estimate the reliability of the P2P storage networks as follows. Given the redundancy parameters $k$, $n$ and the required uptime $t$, the failure probability is calculated as:

\begin{equation*}
\begin{aligned}
F(t; m, k) = \sum_{j=0}^{k-1} {m \choose j}t^j (1-t)^{m-j}
\end{aligned}
\end{equation*}

From the equation above, we obtain the following relationships between the failure probability, the redundancy parameters and the required uptime:

\begin{Lemma}\label{lem:uptime}
i) $F(t; m, k)$ is decreasing in $t$ for fixed $m$ and $k$,\\
ii) $F(t; m, k)$ is decreasing in $m$ for fixed $t$ and $k$.
\end{Lemma}

Lemma \ref{lem:uptime} provides insight into how each parameter affects the failure probability. First, the failure probability decreases when the platform requires a higher uptime to the provider, indicating that the platform can enhance the reliability while maintaining the same redundancy rate by imposing higher responsibility on the provider. Second, if the platform assigns the file fragments to a larger number of providers, the failure probability decreases. It suggests that the platform can improve the file availability by increasing the number of providers instead of imposing higher responsibility on each provider.

Table \ref{tbl:redundancy_1} presents the calculated failure probability under the given redundancy $\theta = 3$. We observe that the platform can improve its system reliability even when it maintains the same redundancy $\theta$ and the same required uptime $t$. For instance, for $\theta=3$ and $t=0.75$, the failure probability is 1.15e-04 when the platform sets $k=5$ and $m=15$. Notably, the platform can reduce the failure probability by about 400 times (from 1.15e-04 to 2.82e-07) by dividing the files into twice more fragments ($k=10$ and $m=30$) without altering $\theta$ and $t$. Moreover, we see that a small increase in the required uptime can dramatically reduce the failure probability. For example, when all other things are same, raising the required $t$ by 20\% (from 0.75 to 0.90) under $k=10$ and $n=30$ decreases the failure by 48.6 million times (from 2.82e-07 to 5.80e-15).

\begin{table}[h]
\textbf{\caption{An Example of Redundancy Algorithm and Failure Probability ($\theta=3$)\label{tbl:redundancy_1}}}
\begin{center}
\begin{tabular}{cccc}
 $m$ & $k$ & $t$ & $F(t; m, k)$\\\hline
15 & 5 & 0.5 & 5.92e-02\\
15 & 5 & 0.75 & 1.15e-04\\
15 & 5 & 0.9 & 9.30e-09\\
15 & 5 & 0.99 & 1.32e-19\\
30 & 10 & 0.5 & 2.14e-02\\
30 & 10 & 0.75 & 2.82e-07\\
30 & 10 & 0.9 & 5.80e-15\\
30 & 10 & 0.99 & 1.31e-35\\
\end{tabular}
\end{center}
\end{table}

In addition to erasure coding, P2P storage platforms are taking several measures to prevent the strikingly adverse effect of file transfer failure. For instance, P2P storage platforms usually require providers to meet the minimum available storage space, computing power of processors, and bandwidth speed. Also, they mandate the uptime level in various ways. Sia expects providers to maintain 95–98\% uptime to achieve 99.9999\% accessibility of stored files. If a provider in the Sia network does not maintain 95\% uptime (or 36 hours off in a month), he will lose his collateral for active contracts. Storj requires a more demanding uptime requirement that requires providers to maintain 99.3\% uptime (or 5 hours of maximum downtime per month). Filecoin assesses miners in the cryptocurrency network and penalizes storage providers using the miners' collateral if they do not perform the proof-of-spacetime. Hypothetically, Sia and Storj are expected to achieve the very low failure probability as 2.52e-29 and 2.11e-91 based on their algorithm parameters ($k, m, t$) as $(10, 30, 0.98)$ and $(29, 80, 0.993)$, respectively.\footnote{The relevant information was retrieved from the following sources: 1) Storj's redundancy parameters (https://docs.storj.io/concepts/overview), 2) Storj's required uptime (https://www.storj.io/node-operator-terms-conditions), 3) Sia's redundancy parameters (https://support.sia.tech/renting/is-my-data-secure\#security), 4) Sia's required uptime (https://support.sia.tech/hosting/about-hosting-on-sia).} According to Storj, the Tardigrade platform---Storj's main service---demonstrated 99.96\% availability in practice.\footnote{Please refer to the following webpage for further details: https://www.storj.io/blog/announcing-pioneer-2-and-tardigrade-io-pricing.}

If we assume that the target failure probability $\bar{p}$ is close to zero, i.e., $\bar{p} \approx 0$, the platform's redundancy parameters and the required uptime satisfy the following equation:
\begin{equation*}
\begin{aligned}
F(t; m, k) = \sum_{j=0}^{k-1} {m \choose j}t^j (1-t)^{m-j} \le \bar{p}.
\end{aligned}
\end{equation*}
As shown in Lemma \ref{lem:uptime}, the platform achieves its target failure probability by requiring a high uptime $t$ or adopting a high redundancy rate $\theta$. Table \ref{tbl:redundancy_2} presents the calculated pair of the redundancy rate and the required uptime for $k=10$ and the target probability $\bar{p} = 10e-10$. Figure \ref{fig:redundancy} visualizes this relationship. When a redundancy rate is low, increasing $\theta$ does not significantly decrease the required uptime. For instance, when $\theta$ increases from 1 to 1.5, the required $t$ decreases by only 0.005. In contrast, when we compare $\theta = 3$ and $\theta = 3.5$, the required uptime decreased by (from 0.836 to 0.776).

\begin{table}[h]
\textbf{\caption{An Example of Redundancy Rate and Uptime ($k=10$, $\bar{p} = 10^{-10}$)\label{tbl:redundancy_2}}}
\begin{center}
\begin{tabular}{cccccc}
 $\theta$ &$t$&$\theta$ & $t$&$\theta$&$t$\\\hline
$\le$1.2 & 1 & 2.0 & 0.957 & 2.8 & 0.861\\
1.3 & 0.999 & 2.1 & 0.947 & 2.9 & 0.849\\
1.4 & 0.998 & 2.2 & 0.935 & 3.0 & 0.836\\
1.5 & 0.995 & 2.3 & 0.924 & 3.1 & 0.824\\
1.6 & 0.990 & 2.4 & 0.911 & 3.2 & 0.812\\
1.7 & 0.984 & 2.5 & 0.899 & 3.3 & 0.800\\
1.8 & 0.976 & 2.6 & 0.886 & 3.4 & 0.788\\
1.9 & 0.967 & 2.7 & 0.874 & 3.5 & 0.776\\
\end{tabular}
\end{center}
\end{table}

\begin{figure}[ht!]
\centering
\includegraphics[width=10cm]{old_figure/uptime_fig.jpg} 
\textbf{\caption{Redundancy Rate and Required Uptime ($k=10$, $\bar{p} = 10^{-10}$)\label{fig:redundancy}}}
\end{figure}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\end{document}